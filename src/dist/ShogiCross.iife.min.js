var ShogiCross=function(e){"use strict";let a={fonts:[["Noto Serif JP",900],["Noto Emoji",400],["Noto Sans Symbols 2",400],["Noto Sans Symbols",400],["Noto Serif",900],["Noto Serif TC",900]]},t={shogi:{name:"将棋",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%B0%86%E6%A3%8B",desc:"一般的な将棋。本将棋とも呼ばれる。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"default"},{gameName:"将棋",pieceSet:"2p"}]},chess:{name:"チェス",variant:"チェス",url:"https://ja.wikipedia.org/wiki/%E3%83%81%E3%82%A7%E3%82%B9",desc:"西洋の将棋類。西洋将棋とも呼ばれる。",playBoard:"チェス",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"default"},{gameName:"チェス",pieceSet:"2p"}]},xiangq:{name:"シャンチー",variant:"シャンチー",url:"https://ja.wikipedia.org/wiki/%E3%82%B7%E3%83%A3%E3%83%B3%E3%83%81%E3%83%BC",desc:"中国の将棋類。象棋、中国将棋とも呼ばれる。",playBoard:"シャンチー",useStand:!1,playPieces:[{gameName:"シャンチー",pieceSet:"default"},{gameName:"シャンチー",pieceSet:"2p"}]},janggi:{name:"チャンギ",variant:"チャンギ",url:"https://ja.wikipedia.org/wiki/%E3%83%81%E3%83%A3%E3%83%B3%E3%82%AE",desc:"朝鮮半島の将棋類。朝鮮将棋とも呼ばれる。",playBoard:"チャンギ",useStand:!1,playPieces:[{gameName:"チャンギ",pieceSet:"default"},{gameName:"チャンギ",pieceSet:"2p"}]},makruk:{name:"マークルック",variant:"マークルック",url:"https://ja.wikipedia.org/wiki/%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%AB%E3%83%83%E3%82%AF",desc:"タイの将棋類。タイ将棋とも呼ばれる。",playBoard:"マークルック",useStand:!1,playPieces:[{gameName:"マークルック",pieceSet:"default"},{gameName:"マークルック",pieceSet:"2p"}]},chaturanga:{name:"チャトランガ",variant:"チャトランガ",url:"https://ja.wikipedia.org/wiki/%E3%83%81%E3%83%A3%E3%83%88%E3%83%A9%E3%83%B3%E3%82%AC",desc:"原初の将棋類。詳細なルールは失われている。",playBoard:"チェス",useStand:!1,playPieces:[{gameName:"チャトランガ",pieceSet:"default"},{gameName:"チャトランガ",pieceSet:"2p"}]},dobutsuShogi:{name:"どうぶつしょうぎ",variant:"どうぶつしょうぎ",url:"https://www.silverstar.co.jp/02products/dobutsushogi/switch/animal.html",desc:"入門用として考案された将棋。",playBoard:"どうぶつしょうぎ",useStand:!0,playPieces:[{gameName:"どうぶつしょうぎ",pieceSet:"default"},{gameName:"どうぶつしょうぎ",pieceSet:"default"}]},toriShogi:{name:"禽将棋",variant:"禽将棋",url:"https://ja.wikipedia.org/wiki/%E7%A6%BD%E5%B0%86%E6%A3%8B",desc:"鳥の名の駒を使用する将棋。特殊な動きをする駒が多い。",playBoard:"将棋7x7",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"禽将棋"},{gameName:"将棋",pieceSet:"禽将棋"}]},chuShogi:{name:"中将棋",variant:"中将棋",url:"https://ja.wikipedia.org/wiki/%E4%B8%AD%E5%B0%86%E6%A3%8B",desc:"現在でもプレイされることのある古将棋の一種。",playBoard:"古将棋12x12",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"中将棋"},{gameName:"将棋",pieceSet:"中将棋2p"}]},grantAcedrex:{name:"Grant Acedrex",variant:"Grant Acedrex",url:"https://www.chessvariants.org/rules/grantacedrex",desc:"古チェスの一種。特殊な動きをする駒が多い。プロモーション先は本来は敵陣の到着列の駒となる(未実装)。",playBoard:"チェス12x12",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"GrantAcedrex"},{gameName:"チェス",pieceSet:"GrantAcedrex2p"}]},courierChessAdvanced:{name:"クーリエチェス(定形配置)",variant:"クーリエチェス(定形配置)",url:"https://en.wikipedia.org/wiki/Courier_chess",desc:"古チェスの一種。ビショップに等しい走り駒(クーリエ)が初めて使用された。",playBoard:"チェス12x8",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"クーリエチェス(定形配置)"},{gameName:"チェス",pieceSet:"クーリエチェス(定形配置)2p"}]},gogoShogi:{name:"5五将棋",variant:"将棋",url:"https://ja.wikipedia.org/wiki/5%E4%BA%94%E5%B0%86%E6%A3%8B",desc:"簡略化された将棋。",playBoard:"将棋5x5",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"default"},{gameName:"将棋",pieceSet:"2p"}]},asakuraShogi:{name:"朝倉象棋",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%B0%8F%E5%B0%86%E6%A3%8B#%E6%9C%9D%E5%80%89%E8%B1%A1%E6%A3%8B",desc:"持ち駒が使用できる小将棋。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"小将棋"},{gameName:"将棋",pieceSet:"小将棋2p"}]},shoShogi:{name:"小将棋",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%B0%8F%E5%B0%86%E6%A3%8B",desc:"中将棋から駒を取り入れて原点回帰した平安将棋。",playBoard:"将棋",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"小将棋"},{gameName:"将棋",pieceSet:"小将棋2p"}]},heianShogi8x8:{name:"平安将棋(8x8)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%B9%B3%E5%AE%89%E5%B0%86%E6%A3%8B",desc:"記録が残る最古の日本の将棋。盤の大きさに緒説ある。",playBoard:"古将棋8x8",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"平安将棋"},{gameName:"将棋",pieceSet:"平安将棋"}]},heianShogi9x8:{name:"平安将棋(9x8)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%B9%B3%E5%AE%89%E5%B0%86%E6%A3%8B",desc:"9x8マスと想定した時の平安将棋。",playBoard:"古将棋9x8",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"平安将棋"},{gameName:"将棋",pieceSet:"平安将棋"}]},heianShogi9x9:{name:"平安将棋(9x9)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%B9%B3%E5%AE%89%E5%B0%86%E6%A3%8B",desc:"9x9マスと想定した時の平安将棋。",playBoard:"古将棋9x9",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"平安将棋"},{gameName:"将棋",pieceSet:"平安将棋"}]},kyoShogiLeft:{name:"京将棋(左京配置)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"京翔と銅将を追加した将棋。左右の配置が存在。",playBoard:"将棋10x10",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"京将棋(左京配置)"},{gameName:"将棋",pieceSet:"京将棋(左京配置)2p"}]},kyoShogiRight:{name:"京将棋(右京配置)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"京将棋の右側に京を置くパターン。",playBoard:"将棋10x10",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"京将棋(右京配置)"},{gameName:"将棋",pieceSet:"京将棋(右京配置)2p"}]},shoKyoShogiLeft:{name:"小京将棋(左置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"桂馬を京翔へ置き換えた本将棋。左右の配置が存在。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"小京将棋(左置換)"},{gameName:"将棋",pieceSet:"小京将棋(左置換)2p"}]},shoKyoShogiRight:{name:"小京将棋(右置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"小京将棋の右置換パターン。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"小京将棋(右置換)"},{gameName:"将棋",pieceSet:"小京将棋(右置換)2p"}]},sanshaShogiLeft:{name:"山車将棋(左置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"香車を山車へ置き換えた本将棋。左右の配置が存在。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"山車将棋(左置換)"},{gameName:"将棋",pieceSet:"山車将棋(左置換)2p"}]},sanshaShogiRight:{name:"山車将棋(右置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"山車将棋の右置換パターン。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"山車将棋(右置換)"},{gameName:"将棋",pieceSet:"山車将棋(右置換)2p"}]},doShogiLeft:{name:"銅将棋(左置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"銀将を銅将へ置き換えた本将棋。左右の配置が存在。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"銅将棋(左置換)"},{gameName:"将棋",pieceSet:"銅将棋(左置換)2p"}]},doShogiRight:{name:"銅将棋(右置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"銅将棋の右置換パターン。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"銅将棋(右置換)"},{gameName:"将棋",pieceSet:"銅将棋(右置換)2p"}]},kinshiShogiLeft:{name:"金翅将棋(左置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"金将を金翅へ置き換えた本将棋。左右の配置が存在。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"金翅将棋(左置換)"},{gameName:"将棋",pieceSet:"金翅将棋(左置換)2p"}]},kinshiShogiRight:{name:"金翅将棋(右置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"金翅将棋の右置換パターン。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"金翅将棋(右置換)"},{gameName:"将棋",pieceSet:"金翅将棋(右置換)2p"}]},kintoShogiLeft:{name:"金斗将棋(左置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"金将を金翅へ置き換えた本将棋。左右の配置が存在。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"金斗将棋(左置換)"},{gameName:"将棋",pieceSet:"金斗将棋(左置換)2p"}]},kintoShogiRight:{name:"金斗将棋(右置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"金斗将棋の右置換パターン。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"金斗将棋(右置換)"},{gameName:"将棋",pieceSet:"金斗将棋(右置換)2p"}]},shogi30AllLeft:{name:"将棋30++(左系フル置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"京将棋系の駒で複数置換した本将棋。左右の配置が存在。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"将棋30++(左系フル置換)"},{gameName:"将棋",pieceSet:"将棋30++(左系フル置換)2p"}]},shogi30AllRight:{name:"将棋30++(右系フル置換)",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E4%BA%AC%E5%B0%86%E6%A3%8B",desc:"将棋30++の右置換パターン。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"将棋30++(右系フル置換)"},{gameName:"将棋",pieceSet:"将棋30++(右系フル置換)2p"}]},okisakiShogi:{name:"御妃将棋",variant:"将棋",url:"https://en.wikipedia.org/wiki/Okisaki_shogi",desc:"チェスの要素を取り入れた本将棋。香車は意図して反車として表示した。",playBoard:"将棋10x10",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"御妃将棋"},{gameName:"将棋",pieceSet:"御妃将棋2p"}]},crazyHouse:{name:"クレージーハウス",variant:"チェス",url:"https://ja.wikipedia.org/wiki/%E3%82%AF%E3%83%AC%E3%83%BC%E3%82%B8%E3%83%BC%E3%83%8F%E3%82%A6%E3%82%B9",desc:"持ち駒が使用できるチェス。",playBoard:"クレージーハウス",useStand:!0,playPieces:[{gameName:"チェス",pieceSet:"default"},{gameName:"チェス",pieceSet:"2p"}]},losAlamosChess:{name:"ロスアラモスチェス",variant:"チェス",url:"https://en.wikipedia.org/wiki/Los_Alamos_chess",desc:"簡略化されたチェス。",playBoard:"チェス6x6",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"default"},{gameName:"チェス",pieceSet:"2p"}]},capablancaChess:{name:"カパブランカチェス",variant:"チェス",url:"https://en.wikipedia.org/wiki/Capablanca_chess",desc:"マーシャル(エンプレス)、カーディナル(プリンセス)を追加したチェス。",playBoard:"チェス10x8",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"カパブランカチェス"},{gameName:"チェス",pieceSet:"カパブランカチェス2p"}]},grandChess:{name:"グランドチェス",variant:"チェス",url:"https://en.wikipedia.org/wiki/Grand_Chess",desc:"カパブランカチェスと同様の駒を使用するが配置が異なる。",playBoard:"チェス10x10",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"グランドチェス"},{gameName:"チェス",pieceSet:"グランドチェス2p"}]},gorogoroDobutsuShogi:{name:"ごろごろどうぶつしょうぎ",variant:"どうぶつしょうぎ",url:"https://www.silverstar.co.jp/02products/dobutsushogi/switch/gorogoro.html",desc:"「きりん」と「ぞう」の代わりに「いぬ」(金将)と「ねこ」(銀将)を追加したどうぶつしょうぎ。5656将棋のどうぶつしょうぎ版。",playBoard:"ごろごろどうぶつしょうぎ",useStand:!0,playPieces:[{gameName:"どうぶつしょうぎ",pieceSet:"default"},{gameName:"どうぶつしょうぎ",pieceSet:"default"}]},shishiShogi:{name:"獅子将棋",variant:"中将棋",url:"https://drive.google.com/file/d/1emrOmE1Xh-sR8wApTOikEgXDGVaAYrrO/view",desc:"中将棋を遊びやすくするよう考案された将棋の一種。",playBoard:"古将棋9x9",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"獅子将棋"},{gameName:"将棋",pieceSet:"獅子将棋2p"}]},heiseiShogi:{name:"平成将棋",variant:"中将棋",url:"http://akasaka0x16.blog.fc2.com/blog-entry-130.html",desc:"中将棋を遊びやすくするよう考案された将棋の一種。",playBoard:"古将棋10x10",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"平成将棋"},{gameName:"将棋",pieceSet:"平成将棋2p"}]},daiShogi:{name:"大将棋",variant:"中将棋",url:"https://ja.wikipedia.org/wiki/%E5%A4%A7%E5%B0%86%E6%A3%8B",desc:"中将棋の祖先とされる古将棋。",playBoard:"古将棋15x15",useStand:!1,playPieces:[{gameName:"将棋",pieceSet:"大将棋"},{gameName:"将棋",pieceSet:"大将棋2p"}]},courierChess:{name:"クーリエチェス(初期配置)",variant:"クーリエチェス(定形配置)",url:"https://en.wikipedia.org/wiki/Courier_chess",desc:"クーリエチェスの定形移動を行わない配置。",playBoard:"チェス12x8",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"クーリエチェス(初期配置)"},{gameName:"チェス",pieceSet:"クーリエチェス(初期配置)2p"}]},p4Shogi:{name:"四人将棋",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%9B%9B%E4%BA%BA%E5%B0%86%E6%A3%8B",desc:"4人用の将棋。",playBoard:"将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"p4"},{gameName:"将棋",pieceSet:"p4"},{gameName:"将棋",pieceSet:"p4"},{gameName:"将棋",pieceSet:"p4"}]},p4Chess:{name:"4人チェス",variant:"チェス",url:"https://en.wikipedia.org/wiki/Four-player_chess",desc:"4人用のチェス。",playBoard:"4人チェス",useStand:!1,playPieces:[{gameName:"チェス",pieceSet:"p4"},{gameName:"チェス",pieceSet:"p4"},{gameName:"チェス",pieceSet:"p4"},{gameName:"チェス",pieceSet:"p4"}]},g4Shogi:{name:"四神将棋",variant:"将棋",url:"https://ja.wikipedia.org/wiki/%E5%9B%9B%E7%A5%9E%E5%B0%86%E6%A3%8B",desc:"テレビ用の企画として考案された4人用の将棋。",playBoard:"四神将棋",useStand:!0,playPieces:[{gameName:"将棋",pieceSet:"p4"},{gameName:"将棋",pieceSet:"p4"},{gameName:"将棋",pieceSet:"p4"},{gameName:"将棋",pieceSet:"p4"}]},chaturaji:{name:"チャトラジ",variant:"チャトランガ",url:"https://ja.wikipedia.org/wiki/%E3%83%81%E3%83%A3%E3%83%88%E3%83%A9%E3%82%B8",desc:"チャトランガの4人用のバリエーション。ダイスで動かす駒を決めていた。",playBoard:"チェス",useStand:!1,playPieces:[{gameName:"チャトランガ",pieceSet:"p4"},{gameName:"チャトランガ",pieceSet:"p4"},{gameName:"チャトランガ",pieceSet:"p4"},{gameName:"チャトランガ",pieceSet:"p4"}]}},s={将棋:{english:"Shogi",fontColor:"#000000",backgroundColor:"#FFDDAA",promoLine:3,position:{5:{default:["歩・・・・","玉金銀角飛"],"2p":["歩・・・・","皇金銀角飛"]},7:{禽将棋:["・・・・燕・・","燕燕燕燕燕燕燕","・・・鷹・・・","鶉雉鶴鵬鶴雉享"]},8:{default:["歩歩歩歩歩歩歩歩","・角・・・・飛・","香桂銀玉金銀桂香"],"2p":["歩歩歩歩歩歩歩歩","・角・・・・飛・","香桂銀皇金銀桂香"],平安将棋:["歩歩歩歩歩歩歩歩","・・・・・・・・","香桂銀玉金銀桂香"]},9:{default:["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉金銀桂香"],"2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇金銀桂香"],"小京将棋(左置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香京銀金玉金銀桂香"],"小京将棋(左置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香京銀金皇金銀桂香"],"小京将棋(右置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉金銀京香"],"小京将棋(右置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇金銀京香"],"山車将棋(左置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","山桂銀金玉金銀桂香"],"山車将棋(左置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","山桂銀金皇金銀桂香"],"山車将棋(右置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉金銀桂山"],"山車将棋(右置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇金銀桂山"],"銅将棋(左置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銅金玉金銀桂香"],"銅将棋(左置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銅金皇金銀桂香"],"銅将棋(右置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉金銅桂香"],"銅将棋(右置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇金銅桂香"],"金翅将棋(左置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀翅玉金銀桂香"],"金翅将棋(左置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀翅皇金銀桂香"],"金翅将棋(右置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉翅銀桂香"],"金翅将棋(右置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇翅銀桂香"],"金斗将棋(左置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀斗玉金銀桂香"],"金斗将棋(左置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀斗皇金銀桂香"],"金斗将棋(右置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉斗銀桂香"],"金斗将棋(右置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇斗銀桂香"],"将棋30++(左系フル置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","山京銅翅玉金銀桂香"],"将棋30++(左系フル置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","山京銅翅皇金銀桂香"],"将棋30++(右系フル置換)":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金玉翅銅京山"],"将棋30++(右系フル置換)2p":["歩歩歩歩歩歩歩歩歩","・角・・・・・飛・","香桂銀金皇翅銅京山"],小将棋:["歩歩歩歩歩歩歩歩歩","・角・・醉・・飛・","香桂銀金玉金銀桂香"],小将棋2p:["歩歩歩歩歩歩歩歩歩","・角・・醉・・飛・","香桂銀金皇金銀桂香"],獅子将棋:["歩歩歩歩歩歩歩歩歩","・碼・獅醉奔・竜・","馨麒艮釡玉釡艮鳳馨"],獅子将棋2p:["歩歩歩歩歩歩歩歩歩","・碼・獅醉奔・竜・","馨麒艮釡皇釡艮鳳馨"],禽将棋:["・・・・・・燕・・","燕燕燕燕燕燕燕燕燕","・・・鷹・鷹・・・","鶉雉鶴・鵬・鶴雉享"],p4:["・・・・歩・・・・","・・・歩飛歩・・・","・・銀金玉金銀・・"],平安将棋:["歩歩歩歩歩歩歩歩歩","・・・・・・・・・","香桂銀金玉金銀桂香"]},10:{"京将棋(左京配置)":["歩歩歩歩歩歩歩歩歩歩","・角・・・銅・・飛・","香桂京銀金玉金銀桂香"],"京将棋(左京配置)2p":["歩歩歩歩歩歩歩歩歩歩","・角・・・銅・・飛・","香桂京銀金皇金銀桂香"],"京将棋(右京配置)":["歩歩歩歩歩歩歩歩歩歩","・角・・銅・・・飛・","香桂銀金玉金銀京桂香"],"京将棋(右京配置)2p":["歩歩歩歩歩歩歩歩歩歩","・角・・銅・・・飛・","香桂銀金皇金銀京桂香"],平成将棋:["・・仲・・・・仲・・","歩歩歩歩歩歩歩歩歩歩","横飛角・獅奔・角飛横","竪麒艮釡玉醉釡艮鳳竪"],平成将棋2p:["・・仲・・・・仲・・","歩歩歩歩歩歩歩歩歩歩","横飛角・獅奔・角飛横","竪麒艮釡皇醉釡艮鳳竪"],御妃将棋:["歩歩歩歩歩歩歩歩歩歩","・角・・・・・・飛・","返跳銀金女玉金銀跳返"],御妃将棋2p:["歩歩歩歩歩歩歩歩歩歩","・角・・・・・・飛・","返跳銀金女皇金銀跳返"]},12:{中将棋:["・・・仲・・・・仲・・・","歩歩歩歩歩歩歩歩歩歩歩歩","横竪飛碼竜獅奔竜碼飛竪横","反・角・虎麒鳳虎・角・反","馨猛同艮釡玉醉釡艮同猛馨"],中将棋2p:["・・・仲・・・・仲・・・","歩歩歩歩歩歩歩歩歩歩歩歩","横竪飛碼竜獅奔竜碼飛竪横","反・角・虎麒鳳虎・角・反","馨猛同艮釡皇醉釡艮同猛馨"]},14:{p4:["・・・歩歩歩歩歩歩歩歩・・・","・・・・角・・・・飛・・・・","・・・香桂銀玉金銀桂香・・・"]},15:{p4:["・・・歩歩歩歩歩歩歩歩歩・・・","・・・・角・・・・・飛・・・・","・・・香桂銀金玉金銀桂香・・・"],大将棋:["・・・・仲・・・・・仲・・・・","歩歩歩歩歩歩歩歩歩歩歩歩歩歩歩","飛瀧横竪角碼竜奔竜碼角竪横瀧飛","・丑・嗔・狼麒獅鳳狼・嗔・丑・","反・猫・猛・虎醉虎・猛・猫・反","馨桂石鉄同艮釡玉釡艮同鉄石桂馨"],大将棋2p:["・・・・仲・・・・・仲・・・・","歩歩歩歩歩歩歩歩歩歩歩歩歩歩歩","飛瀧横竪角碼竜奔竜碼角竪横瀧飛","・丑・嗔・狼麒獅鳳狼・嗔・丑・","反・猫・猛・虎醉虎・猛・猫・反","馨桂石鉄同艮釡皇釡艮同鉄石桂馨"]},17:{p4:["・・・・歩歩歩歩歩歩歩歩歩・・・・","・・・・・角・・・・・飛・・・・・","・・・・香桂銀金玉金銀桂香・・・・"]}}},チェス:{english:"Chess",fontColor:"#FFFFFF",backgroundColor:"#000000",promoLine:1,position:{6:{default:["丘丘丘丘丘丘","塔騎后王騎塔"],"2p":["丘丘丘丘丘丘","塔騎帝后騎塔"]},8:{default:["兵兵兵兵兵兵兵兵","塔騎聖后王聖騎塔"],"2p":["兵兵兵兵兵兵兵兵","塔騎聖帝后聖騎塔"]},9:{default:["兵兵兵兵兵兵兵兵兵","塔騎聖后・王聖騎塔"],"2p":["兵兵兵兵兵兵兵兵兵","塔騎聖帝・后聖騎塔"]},10:{カパブランカチェス:["浜浜浜浜浜浜浜浜浜浜","塔騎駮聖后国聖駆騎塔"],カパブランカチェス2p:["浜浜浜浜浜浜浜浜浜浜","塔騎駆聖國后聖駮騎塔"],グランドチェス:["浜浜浜浜浜浜浜浜浜浜","・騎聖后王駆駮聖騎・","塔・・・・・・・・塔"],グランドチェス2p:["浜浜浜浜浜浜浜浜浜浜","・騎聖駮駆帝后聖騎・","塔・・・・・・・・塔"]},12:{GrantAcedrex:["梹梹梹梹梹梹梹梹梹梹梹梹","・・・・・・・・・・・・","・・・・・・・・・・・・","砦師犀麟鰐鴻呈鰐麟犀師砦"],GrantAcedrex2p:["梹梹梹梹梹梹梹梹梹梹梹梹","・・・・・・・・・・・・","・・・・・・・・・・・・","砦師犀麟鰐逞鴻鰐麟犀師砦"],"クーリエチェス(初期配置)":["鋲鋲鋲鋲鋲鋲鋲鋲鋲鋲鋲鋲","砦騎射使賢閏妾佯使射騎砦"],"クーリエチェス(初期配置)2p":["鋲鋲鋲鋲鋲鋲鋲鋲鋲鋲鋲鋲","砦騎射使佯妾潤賢使射騎砦"],"クーリエチェス(定形配置)":["鋲・・・・・鋲・・・・鋲","・・・・・・妾・・・・・","・鋲鋲鋲鋲鋲・鋲鋲鋲鋲・","砦騎射使賢閏・佯使射騎砦"],"クーリエチェス(定形配置)2p":["鋲・・・・鋲・・・・・鋲","・・・・・妾・・・・・・","・鋲鋲鋲鋲・鋲鋲鋲鋲鋲・","砦騎射使佯・潤賢使射騎砦"]},14:{p4:["・・・兵兵兵兵兵兵兵兵・・・","・・・塔騎聖后王聖騎塔・・・"]},15:{p4:["・・・兵兵兵兵兵兵兵兵兵・・・","・・・塔騎聖后・王聖騎塔・・・"]},17:{p4:["・・・・兵兵兵兵兵兵兵兵兵・・・・","・・・・塔騎聖后・王聖騎塔・・・・"]}}},シャンチー:{english:"Xiangqi",fontColor:"#BB1100",backgroundColor:"#FFDD77",promoLine:4,position:{8:{default:["卒・卒卒・卒・卒","・炮・・・・炮・","・・・・・・・・","俥馮相帥仕相馮俥"],"2p":["卒・卒・卒卒・卒","・炮・・・・炮・","・・・・・・・・","俥馮相仕將相馮俥"]},9:{default:["卒・卒・卒・卒・卒","・炮・・・・・炮・","・・・・・・・・・","俥馮相仕帥仕相馮俥"],"2p":["卒・卒・卒・卒・卒","・炮・・・・・炮・","・・・・・・・・・","俥馮相仕將仕相馮俥"]},14:{p4:["・・・卒・卒卒・卒・卒・・・","・・・・炮・・・・炮・・・・","・・・俥相馮帥仕馮相俥・・・"]},15:{p4:["・・・卒・卒・卒・卒・卒・・・","・・・・炮・・・・・炮・・・・","・・・俥相馮仕帥仕馮相俥・・・"]},17:{p4:["・・・・卒・卒・卒・卒・卒・・・・","・・・・・炮・・・・・炮・・・・・","・・・・・・・・・・・・・・・・・","・・・・俥馮相仕帥仕相馮俥・・・・"]}}},チャンギ:{english:"Janggi",fontColor:"#008800",backgroundColor:"#FFFFFF",position:{8:{default:["卆・卆卆・卆・卆","・包・・・・包・","・・・楚・・・・","車馭象・士象馭車"],"2p":["卆・卆・卆卆・卆","・包・・・・包・","・・・・漢・・・","車馭象士・象馭車"],左象配置:["卆・卆卆・卆・卆","・包・・・・包・","・・・楚・・・・","車象馭・士象馭車"],左象配置2p:["卆・卆・卆卆・卆","・包・・・・包・","・・・・漢・・・","車象馭士・象馭車"],右象配置:["卆・卆卆・卆・卆","・包・・・・包・","・・・楚・・・・","車馭象・士馭象車"],右象配置2p:["卆・卆・卆卆・卆","・包・・・・包・","・・・・漢・・・","車馭象士・馭象車"],外象配置:["卆・卆卆・卆・卆","・包・・・・包・","・・・楚・・・・","車象馭・士馭象車"],外象配置2p:["卆・卆・卆卆・卆","・包・・・・包・","・・・・漢・・・","車象馭士・馭象車"]},9:{default:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・楚・・・・","車馭象士・士象馭車"],"2p":["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・漢・・・・","車馭象士・士象馭車"],左象配置:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・楚・・・・","車象馭士・士象馭車"],左象配置2p:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・漢・・・・","車象馭士・士象馭車"],右象配置:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・楚・・・・","車馭象士・士馭象車"],右象配置2p:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・漢・・・・","車馭象士・士馭象車"],外象配置:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・楚・・・・","車象馭士・士馭象車"],外象配置2p:["卆・卆・卆・卆・卆","・包・・・・・包・","・・・・漢・・・・","車象馭士・士馭象車"]},14:{p4:["・・・卆・卆卆・卆・卆・・・","・・・・包・楚・・包・・・・","・・・車象馭・士馭象車・・・"]},15:{p4:["・・・卆・卆・卆・卆・卆・・・","・・・・包・・楚・・包・・・・","・・・車象馭士・士馭象車・・・"]},17:{p4:["・・・・卆・卆・卆・卆・卆・・・・","・・・・・包・・・・・包・・・・・","・・・・・・・・楚・・・・・・・・","・・・・車馭象士・士象馭車・・・・"]}}},マークルック:{english:"Makruk",fontColor:"#FFFFFF",backgroundColor:"#CC2222",promoLine:3,position:{8:{default:["貝貝貝貝貝貝貝貝","・・・・・・・・","船瑪根君種根瑪船"],"2p":["貝貝貝貝貝貝貝貝","・・・・・・・・","船瑪根公種根瑪船"]},9:{default:["貝貝貝貝貝貝貝貝貝","・・・・・・・・・","船瑪根種君種根瑪船"],"2p":["貝貝貝貝貝貝貝貝貝","・・・・・・・・・","船瑪根種公種根瑪船"]},14:{p4:["・・・貝貝貝貝貝貝貝貝・・・","・・・・・・・・・・・・・・","・・・船瑪根君種根瑪船・・・"]},15:{p4:["・・・貝貝貝貝貝貝貝貝貝・・・","・・・・・・・・・・・・・・・","・・・船瑪根種君種根瑪船・・・"]},17:{p4:["・・・・貝貝貝貝貝貝貝貝貝・・・・","・・・・・・・・・・・・・・・・・","・・・・船瑪根種君種根瑪船・・・・"]}}},チャトランガ:{english:"Chaturanga",fontColor:"#666666",backgroundColor:"#FFFFEE",promoLine:1,position:{8:{default:["木火天央大天火木","戦午像主臣像午戦"],"2p":["木火天央大天火木","戦午像柱臣像午戦"],p4:["矢火本央・・・・","舟午豕主・・・・"]},9:{default:["木火天大央大天火木","戦午像臣主臣像午戦"],"2p":["木火天大央大天火木","戦午像臣柱臣像午戦"]},14:{p4:["・・・木火天央大天火木・・・","・・・戦午像主臣像午戦・・・"]},15:{p4:["・・・木火天大央大天火木・・・","・・・戦午像臣主臣像午戦・・・"]},17:{p4:["・・・・木火天大央大天火木・・・・","・・・・戦午像臣主臣像午戦・・・・"]}}},どうぶつしょうぎ:{english:"DobutsuShogi",fontColor:"#666666",backgroundColor:"#DDCCFF",promoLine:3,position:{3:{default:["・ひ・","きラぞ"]},5:{default:["・ひひひ・","・・・・・","ねいらいね"]}}}},i={将棋:{backgroundColor:"#EECC88",borderColor:"#333333",field:["SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS"]},チェス:{backgroundColor:"#444444",borderColor:"#000000",field:["WBWBWBWB","BWBWBWBW","WBWBWBWB","BWBWBWBW","WBWBWBWB","BWBWBWBW","WBWBWBWB","BWBWBWBW"]},シャンチー:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:1,field:["SSS<#>SSS","SSS#*#SSS","SSS>#<SSS","SSSSSSSSS","=======]=","=[=======","SSSSSSSSS","SSS<#>SSS","SSS#*#SSS","SSS>#<SSS"]},チャンギ:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:1,field:["SSS<#>SSS","SSS#*#SSS","SSS>#<SSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSSSSSSSS","SSS<#>SSS","SSS#*#SSS","SSS>#<SSS"]},マークルック:{backgroundColor:"#775544",borderColor:"#000000",field:["MMMMMMMM","MMMMMMMM","MMMMMMMM","MMMMMMMM","MMMMMMMM","MMMMMMMM","MMMMMMMM","MMMMMMMM"]},どうぶつしょうぎ:{backgroundColor:"#FFFFDD",borderColor:"#FFDD99",promoLineOffset:-2,field:["DDD","$$$","$$$","ddd"]},将棋5x5:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:-2,field:["SSSSS","SSSSS","SSSSS","SSSSS","SSSSS"]},将棋7x7:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:-1,field:["SSSSSSS","SSSSSSS","SSSSSSS","SSSSSSS","SSSSSSS","SSSSSSS","SSSSSSS"]},将棋10x10:{backgroundColor:"#EECC88",borderColor:"#333333",field:["SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS","SSSSSSSSSS"]},チェス6x6:{backgroundColor:"#444444",borderColor:"#000000",field:["WBWBWB","BWBWBW","WBWBWB","BWBWBW","WBWBWB","BWBWBW"]},チェス10x8:{backgroundColor:"#444444",borderColor:"#000000",field:["WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW"]},チェス10x10:{backgroundColor:"#444444",borderColor:"#000000",promoLineOffset:2,field:["WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW","WBWBWBWBWB","BWBWBWBWBW"]},チェス12x8:{backgroundColor:"#444444",borderColor:"#000000",field:["WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW"]},チェス12x12:{backgroundColor:"#444444",borderColor:"#000000",field:["WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW","WBWBWBWBWBWB","BWBWBWBWBWBW"]},ごろごろどうぶつしょうぎ:{backgroundColor:"#FFFFDD",borderColor:"#FFDD99",promoLineOffset:-1,field:["44444","44444","$$$$$","$$$$$","ddddd","ddddd"]},古将棋8x8:{backgroundColor:"#EECC88",borderColor:"#333333",field:["ssssssss","ssssssss","ssssssss","ssssssss","ssssssss","ssssssss","ssssssss","ssssssss"]},古将棋9x8:{backgroundColor:"#EECC88",borderColor:"#333333",field:["sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss"]},古将棋9x9:{backgroundColor:"#EECC88",borderColor:"#333333",field:["sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss","sssssssss"]},古将棋10x10:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:1,field:["ssssssssss","ssssssssss","ssssssssss","ssssssssss","ssssssssss","ssssssssss","ssssssssss","ssssssssss","ssssssssss","ssssssssss"]},古将棋12x12:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:1,field:["ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss","ssssssssssss"]},古将棋15x15:{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:2,field:["sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss","sssssssssssssss"]},クレージーハウス:{backgroundColor:"#444444",borderColor:"#000000",field:["wbwbwbwb","bwbwbwbw","wbwbwbwb","bwbwbwbw","wbwbwbwb","bwbwbwbw","wbwbwbwb","bwbwbwbw"]},"4人チェス":{backgroundColor:"#444444",borderColor:"#000000",promoLineOffset:6,field:["...BWBWBWBW...","...WBWBWBWB...","...BWBWBWBW...","BWBWBWBWBWBWBW","WBWBWBWBWBWBWB","BWBWBWBWBWBWBW","WBWBWBWBWBWBWB","BWBWBWBWBWBWBW","WBWBWBWBWBWBWB","BWBWBWBWBWBWBW","WBWBWBWBWBWBWB","...WBWBWBWB...","...BWBWBWBW...","...WBWBWBWB..."]},四神将棋:{backgroundColor:"#EECC88",borderColor:"#333333",sidePromo:!0,field:["...SSSSSSSSS...","...SSSSSSSSS...","...SSSSSSSSS...","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","SSSSSSSSSSSSSSS","...SSSSSSSSS...","...SSSSSSSSS...","...SSSSSSSSS..."]},クロス8x8:{backgroundColor:"#EECC88",borderColor:"#333333",field:["WBW<#>SS","BWB#*#SS","WBW>#<SS","======]=","=[======","SS<#>BWB","SS#*#WBW","SS>#<BWB"]},クロス9x9:{backgroundColor:"#EECC88",borderColor:"#333333",field:["XSX<#>XSX","SXS#*#SXS","XSX>#<XSX","SSSSSSSSS","=[=====]=","SSSSSSSSS","XSX<#>XSX","SXS#*#SXS","XSX>#<XSX"]},クロス11x11:{backgroundColor:"#EECC88",borderColor:"#333333",field:["BWBW<#>SXSX","WBWB#*#XSXS","BWBW>#<SXSX","SSSSSSSSSSS","SSSSSSSSSSS","=[=======]=","SSSSSSSSSSS","SSSSSSSSSSS","XSXS<#>WBWB","SXSX#*#BWBW","XSXS>#<WBWB"]},クロス12x12:{backgroundColor:"#EECC88",borderColor:"#333333",field:["BWBW<#>XSXSX","WBWB#*#SXSXS","BWBW>#<XSXSX","SSSSSSSSSSSS","SSSSSSSSSSSS","==========]=","=[==========","SSSSSSSSSSSS","SSSSSSSSSSSS","XSXSX<#>WBWB","SXSXS#*#BWBW","XSXSX>#<WBWB"]},クロス13x13:{backgroundColor:"#EECC88",borderColor:"#333333",field:["BWBWB<#>XSXSX","WBWBW#*#SXSXS","BWBWB>#<XSXSX","SSSSSSSSSSSSS","SSSSSSSSSSSSS","SSSSSSSSSSSSS","=[=========]=","SSSSSSSSSSSSS","SSSSSSSSSSSSS","SSSSSSSSSSSSS","XSXSX<#>BWBWB","SXSXS#*#WBWBW","XSXSX>#<BWBWB"]},"4人用クロス8列":{backgroundColor:"#444444",borderColor:"#000000",promoLineOffset:6,field:["...XSX<#>XS...","...SXS#*#SX...","...XSX>#<XS...","XSXWBWBWBWBSXS","SXSBWBWBWBWXSX","<#>WB===]WBSXS","#*#BW====BW<#>",">#<WB====WB#*#","SXSBW[===BW>#<","XSXWBWBWBWBSXS","SXSBWBWBWBWXSX","...SX<#>XSX...","...XS#*#SXS...","...SX>#<XSX..."]},"4人用クロス9列":{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:6,field:["...XSX<#>XSX...","...SXS#*#SXS...","...XSX>#<XSX...","XSXBWBWBWBWBXSX","SXSWBWBWBWBWSXS","XSXBWB==]BWBXSX","<#>WB=====BW<#>","#*#BW=====WB#*#",">#<WB=====BW>#<","XSXBWB[==BWBXSX","SXSWBWBWBWBWSXS","XSXBWBWBWBWBXSX","...XSX<#>XSX...","...SXS#*#SXS...","...XSX>#<XSX..."]},"4人用クロス9列4行":{backgroundColor:"#EECC88",borderColor:"#333333",promoLineOffset:6,field:["....XSX<#>XSX....","....SXS#*#SXS....","....XSX>#<XSX....","....SXSXSXSXS....","XSXSBWBWBWBWBSXSX","SXSXWBWBWBWBWXSXS","XSXSBWB==]BWBSXSX","<#>XWB=====BWX<#>","#*#SBW=====WBS#*#",">#<XWB=====BWX>#<","XSXSBWB[==BWBSXSX","SXSXWBWBWBWBWXSXS","XSXSBWBWBWBWBSXSX","....SXSXSXSXS....","....XSX<#>XSX....","....SXS#*#SXS....","....XSX>#<XSX...."]}},r={S:{name:"将棋",text:"　　",backgroundColor:"#EECC88",borderColor:"#333333"},s:{name:"古将棋(持ち駒なし)",text:"　　",backgroundColor:"#EECC88",borderColor:"#333333",attr:["cantCapture"]},X:{name:"クロス用黒",text:"　　",backgroundColor:"#BB7744",borderColor:"#333333"},M:{name:"マークルック",text:"　　",backgroundColor:"#775544",borderColor:"#CCCCCC"},W:{name:"チェス白",text:"　　",backgroundColor:"#CCCCCC",borderColor:"#33333377"},B:{name:"チェス黒",text:"　　",backgroundColor:"#444444",borderColor:"#CCCCCC77"},w:{name:"チェス白(クレージーハウス)",text:"　　",backgroundColor:"#CCCCCC",borderColor:"#33333377",attr:["capture"]},b:{name:"チェス黒(持ち駒あり)",text:"　　",backgroundColor:"#444444",borderColor:"#CCCCCC77",attr:["capture"]},"+":{name:"シャンチー(交点)",text:"　　",backgroundColor:"#EECC88",borderColor:"#333333",intersect:!0},$:{name:"どうぶつしょうぎ地",text:"　　",backgroundColor:"#FFFFDD",borderColor:"#FFBB77"},D:{name:"どうぶつしょうぎ空",text:"　　",backgroundColor:"#AADDFF",borderColor:"#FFBB77"},4:{name:"どうぶつしょうぎ夕",text:"　　",backgroundColor:"#FFDDAA",borderColor:"#FFBB77"},d:{name:"どうぶつしょうぎ森",text:"　　",backgroundColor:"#DDFFAA",borderColor:"#FFBB77"},"=":{name:"河界",text:"＝＝",backgroundColor:"#EECC88",borderColor:"#33221144"},"[":{name:"河界左字",text:"＝＝",backgroundColor:"#EECC88",borderColor:"#33221144",displayText:"河",textRotate:-90},"]":{name:"河界右字",text:"＝＝",backgroundColor:"#EECC88",borderColor:"#33221144",displayText:"界",textRotate:90},"#":{name:"九宮",text:"　：",backgroundColor:"#CC9966",borderColor:"#333333",attr:["palace"]},"<":{name:"九宮左",text:"　＼",backgroundColor:"#CC9966",borderColor:"#333333",borderSlashLeft:!0,attr:["palace","palaceSlash"]},">":{name:"九宮右",text:"　／",backgroundColor:"#CC9966",borderColor:"#333333",borderSlashRight:!0,attr:["palace","palaceSlash"]},"*":{name:"九宮中",text:"　※",backgroundColor:"#CC9966",borderColor:"#333333",borderSlashLeft:!0,borderSlashRight:!0,attr:["palace","palaceSlash"]},".":{name:"立入禁止",text:"＃＃",backgroundColor:"#00000000",borderColor:"#00000000",attr:["keepOut"]}},o={歩:{name:"歩兵",display:["歩兵"],gameName:"将棋",unit:"兵",attr:["capture"],forcePromoLine:1,range:{default:"歩"},promo:"と"},桂:{name:"桂馬",display:["桂馬"],gameName:"将棋",unit:"馬",attr:["capture"],forcePromoLine:2,range:{default:"桂"},promo:"圭"},銀:{name:"銀将",display:["銀将","銀將"],gameName:"将棋",unit:"象",attr:["capture"],range:{default:"銀"},promo:"全"},角:{name:"角行",display:["角行"],gameName:"将棋",unit:"象",attr:["capture"],range:{default:"聖"},promo:"馬"},香:{name:"香車",display:["香車"],gameName:"将棋",unit:"車",attr:["capture"],forcePromoLine:1,range:{default:"香"},promo:"杏"},飛:{name:"飛車",display:["飛車"],gameName:"将棋",unit:"車",attr:["capture"],range:{default:"車"},promo:"龍"},金:{name:"金将",display:["金將","金将"],gameName:"将棋",unit:"臣",attr:["capture"],range:{default:"金"}},玉:{name:"玉将",display:["玉將","王將","玉将","王将"],alias:"皇",gameName:"将棋",unit:"王",attr:["king","capture"],range:{default:"王"}},兵:{name:"ポーン",display:["♟兵","♙兵"],gameName:"チェス",unit:"兵",attr:["enPassant"],forcePromoLine:1,range:{default:"歩",start:"二",attack:"兵",enPassant:"通"},promo:"妃騏城僧"},騎:{name:"ナイト",display:["♞騎","♘騎"],gameName:"チェス",unit:"馬",range:{default:"騎"}},聖:{name:"ビショップ",display:["♝聖","♗聖"],gameName:"チェス",unit:"象",range:{default:"聖"}},塔:{name:"ルーク",display:["♜塔","♖塔"],gameName:"チェス",unit:"車",attr:["castlingRook"],range:{default:"車",castling:"塔"}},后:{name:"クイーン",display:["♛后","♕后"],gameName:"チェス",unit:"臣",range:{default:"后"}},王:{name:"キング",display:["♚王","♔王"],alias:"帝",gameName:"チェス",unit:"王",attr:["king","castlingKing"],range:{default:"王",castling:"城"}},卒:{name:"卒",display:["○卒","○兵","卒","兵"],gameName:"シャンチー",unit:"兵",forcePromoLine:4,range:{default:"歩"},promo:"率"},炮:{name:"炮",display:["○炮","○砲","炮","砲"],alias:"砲",gameName:"シャンチー",unit:"砲",attr:["pao"],range:{default:"車",attack:"砲"}},馮:{name:"傌",display:["○傌","○傌","○馬","傌","馬"],alias:"傌",gameName:"シャンチー",unit:"馬",range:{default:"馮"}},相:{name:"相",display:["○相","○象","相","象"],gameName:"シャンチー",unit:"象",attr:["unCrossRiver"],range:{default:"相"}},俥:{name:"俥",display:["○俥","○車","俥","車"],gameName:"シャンチー",unit:"車",range:{default:"車"}},仕:{name:"仕",display:["○仕","○士","仕","士"],gameName:"シャンチー",unit:"臣",attr:["inPalace"],range:{palaceSlash:"ぞ"}},帥:{name:"帥",display:["⊕帥","⊕將","帥","將"],alias:"將",gameName:"シャンチー",unit:"王",attr:["king","inPalace","cantSeeKing"],range:{default:"き"}},卆:{name:"卒",display:["⬡卆","⬡卒","卆","卒"],gameName:"チャンギ",unit:"兵",range:{default:"卒",palaceSlash:"兵"}},包:{name:"包",display:["⬡包","包"],gameName:"チャンギ",unit:"砲",attr:["po"],range:{default:"砲",palaceSlash:"弓"}},馭:{name:"馬",display:["⬡马","⬡马","⬡馭","⬡馬","马","馭","馬"],alias:"马",gameName:"チャンギ",unit:"馬",range:{default:"馮"}},象:{name:"象",display:["⬡象","象"],gameName:"チャンギ",unit:"象",range:{default:"象"}},車:{name:"車",display:["⬡车","⬡车","⬡車","车","車"],alias:"车",gameName:"チャンギ",unit:"車",range:{default:"車",palaceSlash:"聖"}},士:{name:"士",display:["⬡士","士"],gameName:"チャンギ",unit:"臣",attr:["inPalace"],range:{default:"き",palaceSlash:"ぞ"}},楚:{name:"楚",display:["⏣楚","⏣漢","楚","漢"],alias:"漢",gameName:"チャンギ",unit:"王",attr:["king","inPalace","bikjang","usePass","swapHorseElephant"],range:{default:"き",palaceSlash:"ぞ"}},貝:{name:"ビア",display:["⛂貝","◎貝"],gameName:"マークルック",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"貴"},瑪:{name:"マー",display:["\uD83D\uDC34瑪","\uD83E\uDD84瑪","\uD83E\uDD93瑪"],gameName:"マークルック",unit:"馬",range:{default:"騎"}},根:{name:"コーン",display:["Δ根","\uD83E\uDDC4根","⏏根"],gameName:"マークルック",unit:"象",range:{default:"銀"}},船:{name:"ルアー",display:["⯊船"],gameName:"マークルック",unit:"車",range:{default:"車"}},種:{name:"メット",display:["▴種"],gameName:"マークルック",unit:"臣",range:{default:"ぞ",start:"弐"}},君:{name:"クン",gameName:"マークルック",display:["▲君","△君","▲公","△公"],alias:"公",unit:"王",attr:["king","countingRules"],range:{default:"ぞ"}},火:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1火"],gameName:"チャトランガ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"杵"},天:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1天"],gameName:"チャトランガ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"橡"},木:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1木"],gameName:"チャトランガ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"戰"},大:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1大"],gameName:"チャトランガ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"巨"},央:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1人","\uD83D\uDDE1央"],alias:"人",gameName:"チャトランガ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"往"},午:{name:"アシュワ",display:["\uD83D\uDC0E午"],gameName:"チャトランガ",unit:"馬",range:{default:"騎"}},像:{name:"ガジャ",display:["\uD83D\uDC18像"],gameName:"チャトランガ",unit:"象",range:{default:"像"}},戦:{name:"ラタ",display:["\uD83D\uDEDE戦"],gameName:"チャトランガ",unit:"車",range:{default:"車"}},臣:{name:"マントリ",display:["⚔臣"],gameName:"チャトランガ",unit:"臣",range:{default:"ぞ"}},主:{name:"ラージャ",gameName:"チャトランガ",display:["\uD83D\uDC51主","\uD83D\uDEE1主","\uD83D\uDEE1柱"],alias:"柱",unit:"王",attr:["king"],range:{default:"王"}},ひ:{name:"ひよこ",display:["\uD83D\uDC24ひ"],gameName:"どうぶつしょうぎ",unit:"兵",attr:["capture"],forcePromoLine:1,range:{default:"歩"},promo:"に"},ぞ:{name:"ぞう",display:["\uD83D\uDC18ぞ"],gameName:"どうぶつしょうぎ",unit:"象",attr:["capture"],range:{default:"ぞ"}},き:{name:"きりん",display:["\uD83E\uDD92き"],gameName:"どうぶつしょうぎ",unit:"車",attr:["capture"],range:{default:"き"}},ラ:{name:"ライオン",display:["\uD83E\uDD81ラ"],gameName:"どうぶつしょうぎ",unit:"王",attr:["king","capture","ruleThrough"],range:{default:"王"}},燕:{name:"燕",display:["燕"],gameName:"将棋",expansion:"禽将棋",unit:"兵",attr:["capture"],forcePromoLine:3,range:{default:"歩"},promo:"鴈"},雉:{name:"雉",display:["雉"],gameName:"将棋",expansion:"禽将棋",unit:"馬",attr:["capture"],range:{default:"雉"}},鶴:{name:"銀将",display:["鶴"],gameName:"将棋",expansion:"禽将棋",unit:"象",attr:["capture"],range:{default:"猛"}},鶉:{name:"鶉(左)",display:["左鶉"],gameName:"将棋",expansion:"禽将棋",unit:"車",attr:["capture"],range:{default:"鶉"}},享:{name:"鶉(右)",display:["右鶉"],gameName:"将棋",expansion:"禽将棋",unit:"車",attr:["capture"],range:{default:"享"}},鷹:{name:"鷹",display:["鷹"],gameName:"将棋",expansion:"禽将棋",unit:"臣",attr:["capture"],forcePromoLine:3,range:{default:"醉"},promo:"雕"},鵬:{name:"鵬",display:["鵬"],gameName:"将棋",expansion:"禽将棋",unit:"王",attr:["king","capture","twoSwallows"],range:{default:"王"}},京:{name:"京翔",display:["京翔"],gameName:"将棋",expansion:"京将棋",unit:"馬",attr:["capture"],forcePromoLine:3,range:{default:"京"},promo:"幾"},銅:{name:"銅将",display:["銅将"],gameName:"将棋",expansion:"京将棋",unit:"象",attr:["capture"],range:{default:"銅"},promo:"う"},山:{name:"山車",display:["山車"],gameName:"将棋",expansion:"京将棋",unit:"車",attr:["capture"],range:{default:"山"},promo:"さ"},翅:{name:"金翅",display:["金翅"],gameName:"将棋",expansion:"京将棋",unit:"臣",attr:["capture"],range:{default:"翅"}},斗:{name:"金斗",display:["金斗"],gameName:"将棋",expansion:"京将棋",unit:"臣",attr:["capture"],range:{default:"斗"}},跳:{name:"跳馬",display:["跳馬"],gameName:"将棋",expansion:"御妃将棋",unit:"馬",attr:["capture"],range:{default:"騎"},promo:"含"},返:{name:"反車",display:["反車"],gameName:"将棋",expansion:"御妃将棋",unit:"車",attr:["capture"],range:{default:"反"},promo:"余"},女:{name:"妃将",display:["妃將"],gameName:"将棋",expansion:"御妃将棋",unit:"臣",attr:["capture"],range:{default:"后"}},醉:{name:"醉象",display:["醉象"],expansion:"朝倉象棋",gameName:"将棋",unit:"臣",attr:["capture","cantCapture"],range:{default:"醉"},promo:"太"},丘:{name:"ポーン",display:["♟兵","♙兵","♟丘","♙丘"],gameName:"チェス",expansion:"ロスアラモスチェス",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"妃騏城"},浜:{name:"ポーン",display:["♟兵","♙兵","♟浜","♙浜"],gameName:"チェス",expansion:"カパブランカチェス",unit:"兵",attr:["enPassant"],forcePromoLine:1,range:{default:"歩",start:"二",attack:"兵"},promo:"妃駈駁騏城僧"},駮:{name:"カーディナル",display:["\uD83E\uDE53駮","\uD83E\uDE50駮"],gameName:"チェス",expansion:"カパブランカチェス",unit:"臣",range:{default:"駮"}},駆:{name:"マーシャル",display:["\uD83E\uDE52駆","\uD83E\uDE4F駆"],gameName:"チェス",expansion:"カパブランカチェス",unit:"臣",range:{default:"駆"}},国:{name:"キング",display:["♚王","♔王"],alias:"國",gameName:"チェス",expansion:"カパブランカチェス",unit:"王",attr:["king","castlingKing"],range:{default:"王",castling:"国"}},矢:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1矢"],gameName:"チャトランガ",expansion:"チャトラジ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"舶"},本:{name:"パダーティ",display:["\uD83D\uDDE1人","\uD83D\uDDE1本"],gameName:"チャトランガ",expansion:"チャトラジ",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"豪"},舟:{name:"ローカ",display:["⛵舟"],gameName:"チャトランガ",expansion:"チャトラジ",unit:"象",range:{default:"像"}},豕:{name:"ハスティー",display:["\uD83D\uDC18豕"],gameName:"チャトランガ",expansion:"チャトラジ",unit:"車",range:{default:"車"}},ね:{name:"ねこ",display:["\uD83D\uDC31ね"],gameName:"どうぶつしょうぎ",expansion:"ごろごろどうぶつしょうぎ",unit:"象",attr:["capture"],range:{default:"銀"},promo:"ネ"},い:{name:"いぬ",display:["\uD83D\uDC36い"],gameName:"どうぶつしょうぎ",expansion:"ごろごろどうぶつしょうぎ",unit:"臣",attr:["capture"],range:{default:"金"}},ら:{name:"ライオン",display:["\uD83E\uDD81ラ"],gameName:"どうぶつしょうぎ",expansion:"ごろごろどうぶつしょうぎ",unit:"王",attr:["king","capture"],range:{default:"王"}},仲:{name:"仲人",display:["仲人"],gameName:"将棋",expansion:"中将棋",unit:"兵",range:{default:"仲"},promo:"酔"},同:{name:"銅将",display:["銅将"],gameName:"将棋",expansion:"中将棋",unit:"臣",range:{default:"歩"},promo:"黄"},艮:{name:"銀将",display:["銀将"],gameName:"将棋",expansion:"中将棋",unit:"象",range:{default:"銀"},promo:"堅"},釡:{name:"金将",display:["金將","金将"],gameName:"将棋",expansion:"中将棋",unit:"臣",range:{default:"金"},promo:"升"},猛:{name:"猛豹",display:["猛豹"],gameName:"将棋",expansion:"中将棋",unit:"象",range:{default:"猛"},promo:"桷"},馨:{name:"香車",display:["香車"],gameName:"将棋",expansion:"中将棋",unit:"車",forcePromoLine:1,range:{default:"香"},promo:"駒"},反:{name:"反車",display:["反車"],gameName:"将棋",expansion:"中将棋",unit:"車",range:{default:"反"},promo:"鯨"},虎:{name:"盲虎",display:["盲虎"],gameName:"将棋",expansion:"中将棋",unit:"象",range:{default:"虎"},promo:"鹿"},麒:{name:"麒麟",display:["麒麟"],gameName:"将棋",expansion:"中将棋",unit:"馬",range:{default:"麒"},promo:"鰤"},鳳:{name:"鳳凰",display:["鳳凰"],gameName:"将棋",expansion:"中将棋",unit:"象",range:{default:"鳳"},promo:"卉"},横:{name:"横行",display:["横行"],gameName:"将棋",expansion:"中将棋",unit:"車",range:{default:"横"},promo:"猪"},竪:{name:"竪行",display:["竪行"],gameName:"将棋",expansion:"中将棋",unit:"車",range:{default:"竪"},promo:"牛"},碼:{name:"竜馬",display:["竜馬"],gameName:"将棋",expansion:"中将棋",unit:"臣",range:{default:"馬"},promo:"鷂"},竜:{name:"竜王",display:["竜王"],gameName:"将棋",expansion:"中将棋",unit:"臣",range:{default:"竜"},promo:"鷲"},奔:{name:"奔走",display:["奔走"],gameName:"将棋",expansion:"中将棋",unit:"臣",range:{default:"后"}},獅:{name:"獅子",display:["獅子"],gameName:"将棋",expansion:"中将棋",unit:"臣",range:{default:"獅"}},石:{name:"石将",display:["石将"],gameName:"将棋",expansion:"大将棋",unit:"兵",forcePromoLine:1,range:{default:"兵"},promo:"鉐"},鉄:{name:"鉄将",display:["鐵将","鐵将","鉄将"],alias:"鐵",gameName:"将棋",expansion:"大将棋",unit:"兵",forcePromoLine:1,range:{default:"鉄"},promo:"鋼"},猫:{name:"猫刄",display:["猫刄"],gameName:"将棋",expansion:"大将棋",unit:"象",range:{default:"ぞ"},promo:"錨"},瀧:{name:"飛龍",display:["飛龍"],gameName:"将棋",expansion:"大将棋",unit:"象",range:{default:"瀧"},promo:"錆"},嗔:{name:"嗔猪",display:["嗔猪"],gameName:"将棋",expansion:"大将棋",unit:"車",range:{default:"き"},promo:"鎭"},丑:{name:"猛牛",display:["猛牛"],gameName:"将棋",expansion:"大将棋",unit:"車",range:{default:"丑"},promo:"鈕"},狼:{name:"悪狼",display:["悪狼"],gameName:"将棋",expansion:"大将棋",unit:"臣",range:{default:"狼"},promo:"狂"},梹:{name:"ポーン",display:["♟兵","♙兵","♟梹","♙梹"],gameName:"チェス",expansion:"GrantAcedrex",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"篩遲麋齶塞鵺"},師:{name:"ライオン",display:["\uD83E\uDD81師"],gameName:"チェス",expansion:"GrantAcedrex",unit:"馬",range:{default:"師"}},犀:{name:"ユニコーン",display:["\uD83E\uDD8F犀"],gameName:"チェス",expansion:"GrantAcedrex",unit:"馬",range:{default:"犀"}},麟:{name:"ジラフ",display:["\uD83E\uDD92麟"],gameName:"チェス",expansion:"GrantAcedrex",unit:"象",range:{default:"麟"}},鰐:{name:"コカトリス",display:["\uD83D\uDC0A鰐"],gameName:"チェス",expansion:"GrantAcedrex",unit:"象",range:{default:"聖"}},砦:{name:"ルーク",display:["♜砦"],gameName:"チェス",expansion:"GrantAcedrex",unit:"車",range:{default:"車"}},鴻:{name:"アンカ",display:["\uD83E\uDD85鴻"],gameName:"チェス",expansion:"GrantAcedrex",unit:"臣",range:{default:"鴻"}},呈:{name:"キング",display:["♚王","♔王"],alias:"逞",gameName:"チェス",expansion:"GrantAcedrex",unit:"王",attr:["king"],range:{default:"王",start:"呈"}},鋲:{name:"ソルダート",display:["♟兵","♙兵","♟鋲","♙鋲"],gameName:"チェス",expansion:"クーリエチェス",unit:"兵",forcePromoLine:1,range:{default:"歩",attack:"兵"},promo:"童"},射:{name:"シュッツェ",display:["\uD83C\uDFF9射"],gameName:"チェス",expansion:"クーリエチェス",unit:"象",range:{default:"像"}},使:{name:"クーリエ",display:["⨺使"],gameName:"チェス",expansion:"クーリエチェス",unit:"象",range:{default:"聖"}},佯:{name:"シュライヒ",display:["\uD83C\uDFAD佯"],gameName:"チェス",expansion:"クーリエチェス",unit:"車",range:{default:"き"}},賢:{name:"マン",display:["\uD83C\uDF93賢"],gameName:"チェス",expansion:"クーリエチェス",unit:"臣",range:{default:"王"}},妾:{name:"ケーニギン",display:["♛妾"],gameName:"チェス",expansion:"クーリエチェス",unit:"臣",range:{default:"ぞ"}},閏:{name:"ケーニヒ",display:["♚王","♔王"],alias:"潤",gameName:"チェス",expansion:"クーリエチェス",unit:"王",attr:["king"],range:{default:"王"}},と:{name:"と金",display:["と","个"],alias:"个",attr:["capture"],range:{default:"金"}},杏:{name:"成香",display:["仝","仝","杏"],alias:"仝",attr:["capture"],range:{default:"金"}},圭:{name:"成桂",display:["今","今","圭"],alias:"今",attr:["capture"],range:{default:"金"}},全:{name:"成銀",display:["全"],attr:["capture"],range:{default:"金"}},馬:{name:"龍馬",display:["龍馬","竜馬"],attr:["capture"],range:{default:"馬"}},龍:{name:"龍王",display:["龍王","龍王","竜王"],attr:["capture"],range:{default:"竜"}},妃:{name:"Pクイーン",display:["♕妃","♛妃"],range:{default:"后"}},騏:{name:"Pナイト",display:["♘騏","♞騏"],range:{default:"騎"}},城:{name:"Pルーク",display:["♖城","♜城"],range:{default:"車"}},僧:{name:"Pビショップ",display:["♗僧","♝僧"],range:{default:"聖"}},率:{name:"成卒",display:["⊖率","⊖卒","⊖兵","率","卒","兵"],range:{default:"卒"}},貴:{name:"ビアガーイ",display:["⛀貴","⛀珠","◉貴","◉珠"],alias:"珠",range:{default:"ぞ"}},杵:{name:"Pアシュワ",display:["\uD83D\uDC0E杵"],range:{default:"騎"}},橡:{name:"Pガジャ",display:["\uD83D\uDC18橡"],range:{default:"像"}},戰:{name:"Pラタ",display:["\uD83D\uDEDE戰"],range:{default:"車"}},巨:{name:"Pマントリ",display:["⚔巨"],range:{default:"ぞ"}},往:{name:"Pラージャ",display:["\uD83D\uDD31往"],range:{default:"王"}},に:{name:"にわとり",display:["\uD83D\uDC14に"],attr:["capture"],range:{default:"金"}},鴈:{name:"鴈",display:["鴈"],attr:["capture"],range:{default:"鴈"}},左:{name:"左(鶉)",display:["左"],gameName:"将棋",unit:"車",attr:["promoted"],range:{}},右:{name:"右(鶉)",display:["右"],gameName:"将棋",unit:"車",attr:["promoted"],range:{}},雕:{name:"鵰",display:["鵰","鵰"],alias:"鵰",attr:["capture"],range:{default:"雕"}},幾:{name:"成京",display:["き"],attr:["capture"],range:{default:"金"}},う:{name:"成銅",display:["う"],attr:["capture"],range:{default:"金"}},さ:{name:"成山",display:["さ"],attr:["capture"],range:{default:"金"}},太:{name:"太子",display:["太子"],attr:["king","capture","cantCapture"],range:{default:"王"}},余:{name:"成反",display:["余"],attr:["capture"],range:{default:"金"}},含:{name:"成跳",display:["含"],attr:["capture"],range:{default:"金"}},駁:{name:"Pカーディナル",display:["\uD83E\uDE50駁","\uD83E\uDE53駁"],range:{default:"駮"}},駈:{name:"Pマーシャル",display:["\uD83E\uDE4F駈","\uD83E\uDE52駈"],range:{default:"駆"}},舶:{name:"Pローカ",display:["⛵舶"],range:{default:"像"}},豪:{name:"Pハスティー",display:["\uD83D\uDC18豪"],range:{default:"車"}},ネ:{name:"パワーアップねこ",display:["\uD83D\uDE3Aネ"],attr:["capture"],range:{default:"金"}},升:{name:"金飛車",display:["金飛"],range:{default:"車"}},堅:{name:"銀竪行",display:["銀竪"],range:{default:"竪"}},黄:{name:"銅横行",display:["銅横"],range:{default:"横"}},桷:{name:"小角",display:["小角"],range:{default:"聖"}},駒:{name:"白駒",display:["白駒"],range:{default:"駒"}},鯨:{name:"鯨鯢",display:["鯨鯢"],range:{default:"鯨"}},鹿:{name:"飛鹿",display:["飛鹿"],range:{default:"鹿"}},鰤:{name:"麒獅子",display:["麒獅"],range:{default:"獅"}},卉:{name:"鳳奔走",display:["鳳奔"],range:{default:"后"}},酔:{name:"酔象",display:["酔象"],range:{default:"醉"}},猪:{name:"奔猪",display:["奔猪"],range:{default:"猪"}},牛:{name:"飛牛",display:["飛牛"],range:{default:"牛"}},鷂:{name:"角鷹",display:["角鷹"],range:{default:"鷂"}},鷲:{name:"飛鷲",display:["飛鷲"],range:{default:"鷲"}},鉐:{name:"石金将",display:["石金"],range:{default:"金"}},鋼:{name:"金将",display:["鉄金"],range:{default:"金"}},錨:{name:"猫金将",display:["猫金"],range:{default:"金"}},錆:{name:"龍金将",display:["龍金"],range:{default:"金"}},鎭:{name:"嗔金将",display:["嗔金"],range:{default:"金"}},鈕:{name:"牛金将",display:["牛金"],range:{default:"金"}},狂:{name:"狼金将",display:["狼金"],range:{default:"金"}},篩:{name:"Pライオン",display:["\uD83E\uDD81篩"],range:{default:"師"}},遲:{name:"Pユニコーン",display:["\uD83E\uDD8F遲"],range:{default:"犀"}},麋:{name:"Pジラフ",display:["\uD83E\uDD92麋"],range:{default:"麟"}},齶:{name:"Pコカトリス",display:["\uD83D\uDC0A齶"],range:{default:"聖"}},塞:{name:"Pルーク",display:["♖塞"],range:{default:"車"}},鵺:{name:"Pアンカ",display:["\uD83E\uDD85鴻"],range:{default:"鴻"}},童:{name:"Pケーニギン",display:["♕童"],range:{default:"ぞ"}}},n={〇:[".......",".......",".......","...O...",".......",".......","......."],歩:[".......",".......","...A...","...O...",".......",".......","......."],兵:[".......",".......","..A.A..","...O...",".......",".......","......."],二:[".......","...A...","...a...","...O...",".......",".......","......."],通:[".......",".......",".......","..AOA..",".......",".......","......."],弐:[".......","...A...",".......","...O...",".......",".......","......."],卒:[".......",".......","...A...","..AOA..",".......",".......","......."],鴈:[".......",".A...A.",".......","...O...",".......","...A...","......."],仲:[".......",".......","...A...","...O...","...A...",".......","......."],鉄:[".......",".......","..AAA..","...O...",".......",".......","......."],桂:[".......","..A.A..",".......","...O...",".......",".......","......."],京:["..A.A..",".......",".......","...O...",".......",".......","......."],騎:[".......","..A.A..",".A...A.","...O...",".A...A.","..A.A..","......."],馮:[".......","..A.A..",".D.a.B.","..dOb..",".D.c.B.","..C.C..","......."],雉:[".......","...A...",".......","...O...","..A.A..",".......","......."],師:[".......","..AAA..",".A...A.",".A.O.A.",".A...A.","..AAA..","......."],犀:[".*...*.","*.o.o.*",".o...o.","...O...",".o...o.","*.o.o.*",".*...*."],ぞ:[".......",".......","..A.A..","...O...","..A.A..",".......","......."],銀:[".......",".......","..AAA..","...O...","..A.A..",".......","......."],像:[".......",".A...A.",".......","...O...",".......",".A...A.","......."],相:[".......",".A...B.","..a.b..","...O...","..d.c..",".D...C.","......."],象:[".E...F.","L.e.f.G",".l.a.g.","..dOb..",".k.c.h.","K.j.i.H",".J...I."],麒:[".......","...A...","..A.A..",".A.O.A.","..A.A..","...A...","......."],鳳:[".......",".A...A.","...A...","..AOA..","...A...",".A...A.","......."],聖:[".......",".......","..*.*..","...O...","..*.*..",".......","......."],麟:[".A...A.","A.....A",".......","...O...",".......","A.....A",".A...A."],瀧:[".......",".......","..2.2..","...O...","..2.2...",".......","......."],き:[".......",".......","...A...","..AOA..","...A...",".......","......."],香:[".......",".......","...*...","...O...",".......",".......","......."],車:[".......",".......","...*...","..*O*..","...*...",".......","......."],砲:[".......",".......","...+...","..+O+..","...+...","......","......."],弓:[".......",".......","..+.+..","...O...","..+.+..","......","......."],反:[".......",".......","...*...","...O...","...*...",".......","......."],鶉:[".......",".......","...*...","...O...","..A.*..",".......","......."],享:[".......",".......","...*...","...O...","..*.A..",".......","......."],横:[".......",".......","...A...","..*O*..","...A...",".......","......."],竪:[".......",".......","...*...","..AOA..","...*...",".......","......."],丑:[".......",".......","...2...","..2O2..","...2...",".......","......."],山:[".......","...A...","...*...","...O...",".......",".......","......."],鴻:[".......","..*.*..",".*o.o*.","...O...",".*o.o*.","..*.*..","......."],金:[".......",".......","..AAA..","..AOA..","...A...",".......","......."],銅:[".......",".......","..AAA..","...O...","...A...",".......","......."],馬:[".......",".......","..*A*..","..AOA..","..*A*..",".......","......."],竜:[".......",".......","..A*A..","..*O*..","..A*A..",".......","......."],醉:[".......",".......","..AAA..","..AOA..","..A.A..",".......","......."],后:[".......",".......","..***..","..*O*..","..***..",".......","......."],駆:[".......","..A.A..",".A.*.A.","..*O*..",".A.*.A.","..A.A..","......."],駮:[".......","..A.A..",".A*.*A.","...O...",".A*.*A.","..A.A..","......."],雕:[".......",".......","..*A*..","..AOA..","..2*2..",".......","......."],猛:[".......",".......","..AAA..","...O...","..AAA..",".......","......."],虎:[".......",".......","..A.A..","..AOA..","..AAA..",".......","......."],獅:[".......",".AAAAA.",".AAAAA.",".AAOAA.",".AAAAA.",".AAAAA.","......."],駒:[".......",".......","..***..","...O...","...*...",".......","......."],鯨:[".......",".......","...*...","...O...","..***..",".......","......."],鹿:[".......",".......","..A*A..","..AOA..","..A*A..",".......","......."],猪:[".......",".......","..*.*..","..*O*..","..*.*..",".......","......."],牛:[".......",".......","..***..","...O...","..***..",".......","......."],鷂:[".......","...A...","..*A*..","..*O*..","..***..",".......","......."],鷲:[".......",".A...A.","..A*A..","..*O*..","..***..",".......","......."],狼:[".......",".......","..AAA..","..AOA..",".......",".......","......."],翅:[".......",".......","..AAA..","..AOA..","..AA...",".......","......."],斗:[".......",".......","..AAA..","..AOA..","...AA..",".......","......."],王:[".......",".......","..AAA..","..AOA..","..AAA..",".......","......."],城:[".......",".......",".......",".BbOaA.",".......",".......","......."],国:[".......",".......",".......","BbbOaaA",".......",".......","......."],塔:[".......",".......",".......","..|O|..",".......",".......","......."],呈:[".......",".A.A.A.",".......",".A.O.A.",".......",".A.A.A.","......."]},l={女:54,獅:44,后:36,奔:36,駆:36,駮:34,麟:32,鴻:32,飛:28,竜:28,碼:24,塔:22,車:22,俥:20,船:20,戦:20,豕:20,角:20,跳:20,砦:20,醉:18,鷹:18,鶉:18,享:18,翅:16,斗:16,返:16,聖:14,騎:14,瑪:14,午:14,金:14,横:14,竪:14,麒:14,鳳:14,い:14,鶴:14,鰐:14,銀:12,炮:12,ね:12,反:12,虎:12,包:10,根:10,像:10,舟:10,釡:10,雉:10,桂:8,京:8,銅:8,山:8,馮:8,馭:8,馨:8,猛:8,香:7,種:7,臣:7,き:7,ぞ:7,同:7,象:5,士:5,相:4,仕:4,卆:4,仲:4,歩:3,兵:3,浜:3,ひ:2,燕:2,丘:2,梹:2,貝:2,卒:2,火:2,天:2,矢:2,木:2,本:2,大:2,央:2,ラ:0,鵬:-4,玉:-8,ら:-8,王:-12,国:-12,呈:-12,君:-16,主:-18,楚:-24,帥:-28};function d(e){let a=new XMLHttpRequest;return a.open("GET",`./json/ShogiCross/${e}.json`,!1),a.send(),200===a.status?JSON.parse(a.responseText):{}}let S={canvasFont:d("canvasFont"),gameSoft:d("gameSoft"),games:d("games"),boards:d("boards"),panels:d("panels"),pieces:d("pieces"),pieceRange:d("pieceRange"),pieceCost:d("pieceCost")};Object.assign(a,S.canvasFont),Object.assign(t,S.gameSoft),Object.assign(s,S.games),Object.assign(i,S.boards),Object.assign(r,S.panels),Object.assign(o,S.pieces),Object.assign(n,S.pieceRange),Object.assign(l,S.pieceCost);let p=()=>[...new Set([...Object.values(r).map(({displayText:e})=>e).join("")+Object.values(o).map(({display:e})=>e?e.join(""):"").join("")])].sort().join("");Object.assign(a,{imported:!1,names:"",async importAsync(){if(this.imported)return;let e=p(),t=new Date().getTime().toString();return this.names=a.fonts.map(e=>`"${e[0]}${t}"`).join(",")+",serif",Promise.all(a.fonts.map(async([a,s])=>{let i=a.replace(/ /g,"+"),r=`https://fonts.googleapis.com/css2?family=${i}:wght@${s}&text=${e}`,o=await fetch(r);if(!o.ok)return;let n=(await o.text()).match(/url\(.+?\)/g);if(!n)throw Error("Not found font.");for(let e of n){let s=new FontFace(`${a}${t}`,e);document.fonts.add(s),await s.load().catch(()=>{})}})).then(e=>this.imported=!0)}});let m=[...new Set(Object.values(r).flatMap(({imgSrc:e})=>e??[]).concat(Object.values(o).flatMap(({imgSrc:e})=>e??[])))],c={imported:!1,images:{},async importAsync(){if(!this.imported)return Promise.all(m.map(async e=>{this.images[e]=await new Promise(a=>{let t=new Image;t.src=e,t.onload=()=>a(t)})})).then(e=>this.imported=!0)}},g=e=>"image/"+e.replace("jpg","jpeg");async function h(e,a="image",t="png",s="base64"){let i;let r=g(t),o=document.createElement("a");i="blob"===s?URL.createObjectURL(await new Promise(a=>e.toBlob(a),r)):e.toDataURL(r),o.href=i,o.download=`${a}.${t}`,o.click(),"blob"===s&&URL.revokeObjectURL(o.href)}class u{static size=45;static useRankSize=!0;static isDrawShadow=!0;static degChars={0:"▲",90:"≫",180:"▽",270:"＜"};static charDegs=Object.fromEntries(Object.entries(u.degChars).map(([e,a])=>[a,e]));static rankRatio={KR:1,SR:.965,R:.935,UC:.9,C:.865};get rank(){return this.cost<=0?"KR":20<=this.cost?"SR":10<=this.cost?"R":5<=this.cost?"UC":"C"}static getPieces(e,a={}){let t=new Map(Object.entries(JSON.parse(JSON.stringify(o))));for(let[e,a]of t)a.attr??=[],a.unit&&"成"!==a.unit&&(a.base=a);for(let[e,a]of t){if(!a.promo||"string"!=typeof a.promo)continue;let e=[...a.promo];for(let s of(a.promo={},e)){let e=t.get(s);e.attr.push("promoted"),e.unit="成",a.promo[s]=e,t.set(s,{...a,...e})}}[...t].forEach(([s,i],r)=>{i.id=r,i.char=s,t.set(s,new u(e,i,a))});let s=Object.fromEntries(t);for(let[e,a]of t)a.alias.forEach((e,t)=>{let i=a.clone(),r=[...i.display];i.displayPtn=t+1,i.display=r,s[e]=i});return s}static stringToPiece(e,a){if(!a)return null;let[t,s]=[...a],i=u.charDegs[t];if(!i||!e[s])return null;let r=e[s].clone();return r.deg=i,r}static piecesToList(e){return Object.entries(e).sort(([e,{id:a}],[t,{id:s}])=>Math.sign(a-s))}set deg(e){this.rad=e%360*Math.PI/180}get deg(){return this.rad%360/(Math.PI/180)}get left(){return this.center-.8*this.size/2}get top(){return this.middle-this.size/2}get right(){return this.center+.8*this.size/2}get bottom(){return this.middle+this.size/2}get zoom(){let e=this.size/100;return this.useRankSize&&(e*=u.rankRatio[this.rank]),e}constructor(e,a,t={}){let{displayPtn:i=0,deg:r=0,size:o=u.size,useRankSize:d=u.useRankSize,isDrawShadow:S=u.isDrawShadow,isMoved:p=!1}=t;Object.assign(this,a),this.ctx=e,this.display??=[""],this.imgSrc??=null,this.alias=[...this.alias??""],this.displayPtn??=i,this.game=s[this.gameName],this.cost=l[this.char]??1,this.center=0,this.middle=0,this.deg||=r,this.size??=o,this.useRankSize??=d,this.isDrawShadow??=S,this.isRotateImg??=!0,this.isMoved=p,this.isSelected=!1,this.attr??=[];try{Object.entries(this.range).forEach(([e,a])=>{Array.isArray(a)||(this.range[e]=n[a].map(e=>[...e]))})}catch(e){throw console.error(e),a}}clone(){let{displayPtn:e,deg:a,size:t,isMoved:s}=this;return new u(this.ctx,{...this},{displayPtn:e,deg:a,size:t,isMoved:s})}turnFront(){Object.assign(this,this.base)}promotion(e){let{promo:a}=this;if(!a)throw Error(`promo=${e}, Not plomote piece.`);if(!a[e])throw Error(`promo=${e}, Plomote key is missing.`);if(this.hasAttr("promoted"))throw Error(`promo=${e}, Promoted piece.`);Object.assign(this,a[e]),this.char=e}hasAttr(e){return this.attr.includes(e)}checkRangeMouse(e,a){return this.left<=e&&e<this.right&&this.top<=a&&a<this.bottom}getRange(){let e=0|this.deg,a=JSON.parse(JSON.stringify(this.range));return Object.keys(a).forEach(t=>{if(0!==e){if(![90,180,270].includes(e))throw Error(`deg=${e}, deg need multiple of 90.`);if([90,270].includes(e)){let e;a[t]=(e=a[t])[0].map((a,t)=>e.map(e=>e[t]))}[180,270].includes(e)&&a[t].reverse(),a[t].forEach(a=>{[90,180].includes(e)&&a.reverse()})}}),a}async draw(){let e="#FF000055";this.imgSrc&&c.imported?(this.drawImage(),this.isSelected&&this.drawMaskImage(e)):(this.drawPiece(),this.isSelected&&this.drawMask(e))}drawImage(){let e,a;let{ctx:t,size:s}=this,i=this.imgSrc[this.displayPtn],r=c.images[i];r&&(t.save(),t.translate(this.center,this.middle),this.isRotateImg&&t.rotate(this.rad),.9*r.width<r.height?(e=r.width/r.height*s,a=s):(e=s,a=r.height/r.width*s),t.drawImage(r,-e/2,-a/2,e,a),t.restore())}drawMaskImage(e){let{ctx:a,size:t}=this;a.fillStyle=e,a.save();let s=.9*t;a.translate(this.center,this.middle),a.fillRect(-s/2,-t/2,s,t),a.restore()}makePath(e){let{ctx:a}=this;a.translate(this.center,this.middle),a.rotate(this.rad),a.beginPath(),a.moveTo(-30*e,-40*e),a.lineTo(0*e,-50*e),a.lineTo(30*e,-40*e),a.lineTo(45*e,50*e),a.lineTo(-45*e,50*e),a.closePath()}drawPieceShadow(e){if(!this.isDrawShadow)return;let{ctx:a}=this;a.save(),a.translate(0,10*e),this.drawMask("#00000066"),a.restore()}drawPiece(){let e,t,s;let{ctx:i,game:r,zoom:o}=this;this.hasAttr("promoted")?(e=r.promoteFontColor??r.fontColor??"#000000",t=r.promoteBackgroundColor??r.backgroundColor??"#FFFFFF",s=r.promoteBorderColor??r.borderColor??"#FF3300"):(e=r.fontColor??"#000000",t=r.backgroundColor??"#FFFFFF",s=r.borderColor??"#777777"),i.strokeStyle=s,i.fillStyle=t,i.lineWidth=8*o,this.drawPieceShadow(o),i.save(),this.makePath(o),i.stroke(),i.fill(),i.fillStyle=e;let n=[...""+this.display[this.displayPtn]],l=40*o;i.font=`${l}px ${a.names}`,i.textAlign="center",n.forEach((e,a)=>{let t=1===n.length?l/2:a*l;i.fillText(e,0,t)}),i.restore()}drawMask(e){let{ctx:a,zoom:t}=this;a.fillStyle=e,a.save(),this.makePath(t),a.fill(),a.restore()}toString(e=!1){let{displayPtn:a}=this,t=e&&0!==a?this.alias[a-1]:this.char;return u.degChars[this.deg]+t}}class B{#e;#a;#t;get piece(){return this.#e}set piece(e){this.#e=e,e&&(e.center=this.center,e.middle=this.middle)}constructor(e,a,t,s,i,o,n,l,d){Object.assign(this,r[a]),this.ctx=e,this.center=t,this.middle=s,this.width=i,this.height=o,this.left=t-i/2,this.top=s-o/2,this.right=t+i/2,this.bottom=s+o/2,this.pX=n,this.pY=l,this.borderWidth=d,this.selectColor??="#FF000066",this.targetColor??="#00FF0066",this.attr??=[],this.piece=null,this.isSelected=!1,this.clearTarget()}set isSelected(e){this.#a=!this.hasAttr("keepOut")&&e}get isSelected(){return this.#a}get isTarget(){return 0<this.#t.length}clearTarget(){this.#t=[]}addTarget(e){this.#t.push(e)}hasTarget(e){return this.#t.includes(e)}hasAttr(e){return this.attr.includes(e)}checkRangeMouse(e,a){return this.left<=e&&e<this.right&&this.top<=a&&a<this.bottom}draw(){let{selectColor:e,targetColor:a}=this;this.imgSrc&&c.imported?this.drawImage():this.drawPanel(),this.isSelected&&this.drawMask(e),this.isTarget&&this.drawMask(a),this.piece?.draw()}drawImage(){let{ctx:e}=this,a=this.imgSrc,t=c.images[a];t&&(e.save(),e.translate(this.left,this.top),e.drawImage(t,0,0,this.width,this.height),e.restore())}drawPanel(){let{ctx:e,left:t,top:s,center:i,middle:r,width:o,height:n,displayText:l,textRotate:d}=this;if(e.fillStyle=this.backgroundColor,e.strokeStyle=this.borderColor,e.lineWidth=this.borderWidth,e.save(),e.translate(t,s),e.fillRect(0,0,o,n),this.intersect?(e.lineWidth=this.borderWidth,e.beginPath(),e.moveTo(o/2,0),e.lineTo(o/2,n),e.moveTo(0,n/2),e.lineTo(o,n/2),e.closePath(),e.stroke()):e.strokeRect(0,0,o,n),e.lineWidth=this.borderWidth/2,e.beginPath(),this.borderSlashLeft&&(e.moveTo(0,0),e.lineTo(o,n)),this.borderSlashRight&&(e.moveTo(o,0),e.lineTo(0,n)),e.closePath(),e.stroke(),e.restore(),l){e.save(),e.translate(i,r),e.fillStyle=this.borderColor,e.rotate(d?d*Math.PI/180:0);let t=.6*Math.min(this.width,this.height);e.font=`${t}px ${a.names}`;let s=e.measureText(l).width;e.fillText(l,-s/2,t/2*.8),e.restore()}}drawMask(e){let{ctx:a}=this;a.fillStyle=e,a.fillRect(this.left,this.top,this.width,this.height)}toString(e=!1){return e?`｜${this.text.slice(-1).replace(/　/g,"・")}`:this.text}}let f=[["default",{isAttack:!1}],["attack",{isAttack:!0}],["start",{isAttack:!1}],["castling",{isAttack:!1}],["enPassant",{isAttack:!0}],["palaceSlash",{isAttack:!1}],["palaceSlash",{isAttack:!0}]],W=[["O",{isOwn:!0}],["o",{}]],A=[["o"],["A",{child:["a"]}],["B",{child:["b"]}],["C",{child:["c"]}],["D",{child:["d"]}],["E",{child:["a","e"]}],["F",{child:["a","f"]}],["G",{child:["b","g"]}],["H",{child:["b","h"]}],["I",{child:["c","i"]}],["J",{child:["c","j"]}],["K",{child:["d","k"]}],["L",{child:["d","l"]}]],y=[["*",{}],["+",{jmps:1}],["|",{jmps:1,moves:1}]];for(let e=1;e<=9;e++)y.push([""+e,{moves:e}]);class C{constructor(e,a){this.board=e;let t=new Map([["undoRecord",{title:"一手戻る",text:"&lt;&lt;",onclick:()=>e.undoRecord()}],["redoRecord",{title:"一手進む",text:"&gt;&gt;",onclick:()=>e.redoRecord()}],["rotateLeft",{title:"盤面を左回転",text:"\uD83D\uDD04",onclick:()=>e.rotate(!1)}],["rotateRight",{title:"盤面を右回転",text:"\uD83D\uDD01",onclick:()=>e.rotate()}],["downloadImage",{title:"画像を保存",text:"\uD83D\uDCF7",onclick:()=>e.downloadImage()}]]);a??=[...t.keys(),"textRecord"];let s=crypto.randomUUID();for(let[i,{onclick:r}]of(this.component=document.createElement("div"),this.component.id=s,this.component.style.display="flex",this.component.style.maxWidth=e.canvas.width,this.component.innerHTML=`${[...t].filter(([e])=>a.includes(e)).map(([e,{title:a,text:t}])=>`<button id="${e}${s}" title="${a}">${t}</button>`).join("")}${a.includes("textRecord")?`<input id="textRecord${s}" style="flex-grow:1;">`:""}`,t)){if(!a.includes(i))return;this.component.querySelector(`#${i}${s}`).onclick=r}if(!a.includes("textRecord"))return;let i=e.onDrawed??(()=>{});e.onDrawed=e=>{i(e),this.component.querySelector(`#textRecord${s}`).value=e.getTextRecord().split(/\n/).pop()}}add(){let{canvas:e}=this.board;e.after(this.component)}remove(){this.component.remove()}}class w{static #e=new Map([[0," "],[90,">"],[180,"v"],[270,"<"]]);static #a=new Map([...w.#e].map(([e,a])=>[e,RegExp(a,"g")]));static #t=new Map([...w.#e].map(([e,a])=>[a,e]));static #s=new Map([[0,"先手の持駒"],[90,"次手の持駒"],[180,"後手の持駒"],[270,"四手の持駒"]]);static #i=new Map([...w.#s].map(([e,a])=>[a,e]));static #r=["","一","二","三","四","五","六","七","八","九"];static #o=["","十","二十","三十","四十","五十","六十","七十","八十","九十"];static #n(e,a=!0){return!a&&e<=1?"":w.#o[0|e/10]+w.#r[e%10]}static #l(e,a=!0){if(a&&""===e)return 1;if(!isNaN(e))return 0|e;let t=w.#o.findIndex(a=>""!==a&&RegExp("^"+a).test(e));t<0&&(t=0);let s=w.#r.findIndex(a=>""!==a&&RegExp(a+"$").test(e));return s<0&&(s=0),10*t+s}static #d(e){return 10<=e?e:"０１２３４５６７８９"[e%10]}static #S=" ・";static #p(e){return e?w.#e.get(e.deg)+e.char:w.#S}static #m(e,a=0){let t=new Map;return e.stocks.get(a).forEach(({char:e})=>{t.has(e)||t.set(e,0),t.set(e,t.get(e)+1)}),w.#s.get(a)+"："+[...t].map(([e,a])=>e+w.#n(a,!1)).join(" ")}static convTextPieces(e){let a=[],t=[];e.split(/\r|\n|\r\n/).forEach(e=>{[...w.#i.keys()].some(a=>RegExp(`^${a}`).test(e))?t.push(e):a.push(e.slice(1))});let s=a.slice(2,-1).join(`
`);w.#a.forEach((e,a)=>{s=s.replace(e,u.degChars[a])});let i=t.flatMap(e=>{let[a,t]=e.split(/：/);if(""===t)return"";let s=w.#i.get(a),i=u.degChars[s];return t.split(/\s/).map(e=>{let a=e[0],t=e.slice(1);return(i+a).repeat(w.#l(t))})}).join("");return`${s}
${i}`}static getTextPieces(e){let{field:a,xLen:t,players:s,stand:i}=e,r=` ${[...Array(t).keys()].map(e=>` ${w.#d(t-e)}`).join("")}
+${Array(t).fill("---").join("")}+
`,o=`
+${Array(t).fill("---").join("")}+`,n=`
`,l=`${w.#m(i,180)}
`,d=`${w.#m(i,0)}`;return 2!==s&&(l=`${w.#m(i,270)}
`+l,d=`${w.#m(i,90)}
`+d),l+r+a.map((e,a)=>"|"+e.map(e=>w.#p(e.piece)).join("")+"|"+w.#n(a+1)).join(n)+o+`
`+d}}class k{static #e=[180,90,270,0];constructor(e){this.board=e;let{top:a,right:t,bottom:s,width:i,height:r,panelWidth:o,panelHeight:n,xLen:l,yLen:d}=e;this.clear(),this.left=1.02*t,this.top=a,this.width=i/2,this.height=r,this.right=this.left+this.width,this.bottom=s,this.pitchWidth=o/2,this.pitchHeight=n,this.xLen=l,this.yLen=d}clear(){this.stocks=new Map(k.#e.map(e=>[e,[]]))}releasePiece(e,a={}){if(e.hasAttr("keepOut"))return;let{deg:t,i:s}=a,{board:i}=this,r=this.stocks.get(t);e.piece=r[s],r[s].center=e.center,r[s].middle=e.middle,i.addRecord({toPanel:e,end:"打"}),r.splice(s,1)}add(e){let a=this.stocks.get(e.deg);e.turnFront(),a.push(e),a.sort((e,a)=>Math.sign(e.id-a.id))}capturePiece(e,a,t=!1,s=!1){s||!a||!(t||e.hasAttr("capture"))||a.hasAttr("king")||a.hasAttr("cantCapture")||(a.deg=e.deg,a.isMoved=!0,this.add(a))}rotate(e){[...this.stocks].forEach(([a,t])=>{let s=this.board.degNormal(a+e);t.forEach(e=>e.deg=s),this.stocks.set(s,t)})}draw(){let{board:e,left:a,top:t,width:s,height:i,pitchWidth:r,pitchHeight:o}=this,{ctx:n,xLen:l,yLen:d}=e;n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,n.lineWidth=e.borderWidth,n.save(),n.translate(a,t),n.fillRect(0,0,s,i),n.strokeRect(0,0,s,i),n.restore(),[...this.stocks.values()].forEach((e,s)=>{let i=0;e=e.slice(-d/4*l);for(let n=0|d/4*s;n<d/4*(s+1);n++)for(let s=0;s<l;s++){let l=a+r*(s+1),d=t+o*(n+1),S=e[i++];if(null==S)break;S.center=l,S.middle=d,S.draw()}})}toString(e=!1,a=!1){let{xLen:t}=this.board,s=[...this.stocks.values()].flat().filter(e=>e),i=0<s.length?`
`+"―".repeat(2*t)+`
`:"",r=s.map(e=>e.toString(a)).join("");if(!e)for(let e of(i="",Object.values(u.degChars)))r=r.replace(e,`
${e}持駒：${e}`);return i+r}}let b=Object.keys(u.degChars),E=()=>({panel:null,piece:null});class x{constructor(){this.degs={},b.forEach(e=>this.degs[e]=E())}clear(e){this.degs[e]=E()}setTarget(e,a){e.hasTarget("start")&&a.hasAttr("enPassant")&&(this.degs[a.deg].panel=e)}setMoved(e){let{piece:a}=e,t=this.degs[a.deg];a&&e===t.panel?t.piece=a:this.clear(a.deg)}isTarget(e,a){return!e||!e.piece||!!e.piece.hasAttr("enPassant")&&e.piece===this.degs[e.piece.deg].piece}}class N{static run(e,a){return new N(e,a)}constructor(e,t){let{name:s,variant:r,url:o,desc:n,playBoard:l,playPieces:d=[],players:S=d.some(({gameName:e},a)=>1<a&&e)?4:2,useStand:p=!1,canvasWidth:m,canvasHeight:g,canvasFit:h="overflow",boardLeft:C=5,boardTop:w=5,panelWidth:b=50,panelHeight:E=0|1.1*b,pieceSize:N=0|.9*b,useRankSize:X=!0,isDrawShadow:P=!0,borderWidth:v=Math.min(b,E)/30,backgroundColor:O="#00000000",autoDrawing:M=!0,freeMode:L=!1,usePlayerControl:j=!0,onDrawed:F,onGameOver:R=(e,a)=>alert(`プレイヤー${a+1}の敗北です。`)}=t;this.name=s,this.variant=r,this.url=o,this.desc=n;let $=a.importAsync(),D=c.importAsync();this.canvas=e;let T=e.getContext("2d");if(T.clearRect(0,0,e.width,e.height),this.ctx=T,this.pieces=u.getPieces(T,{size:N,useRankSize:X,isDrawShadow:P}),!i[l])throw Error(`playBoard=${l}, Unknown board name.`);if(Object.assign(this,i[l]),![2,4].includes(S))throw Error(`players=${S}, players need 2 or 4.`);this.players=S,this.left=C,this.top=w,this.panelWidth=b,this.panelHeight=E,this.borderWidth=v,this.pieceSize=N,this.canvasBackgroundColor=O,this.field=this.field.map((e,a)=>[...e].map((e,t)=>new B(T,e,C+b*(t+1),w+E*(a+1),b,E,t,a,v))),this.xLen=this.field[0].length,this.yLen=this.field.length,d.forEach(({gameName:e,pieceSet:a},t)=>{if(e)try{this.putStartPieces(t,e,a)}catch(e){console.error(e)}}),this.width=this.panelWidth*(this.xLen+1),this.height=this.panelHeight*(this.yLen+1),this.right=C+this.width,this.bottom=w+this.height,this.stand=new k(this),e.width=m??(p?this.stand.right:this.right)+5,e.height=g??this.bottom+5;let{style:z}=e;"overflow"===h?(""===z.maxWidth&&(z.maxWidth="97vw"),""===z.maxHeight&&(z.maxHeight="97vh")):"horizontal"===h?""===z.width&&(z.width="97vw"):"vertical"===h?""===z.height&&(z.height="97vh"):"parentOverflow"===h?(""===z.maxWidth&&(z.maxWidth="100%"),""===z.maxHeight&&(z.maxHeight="100%")):"parentHorizontal"===h?""===z.width&&(z.width="100%"):"parentVertical"===h&&""===z.height&&(z.height="100%"),this.autoDrawing=M,M&&($.then(()=>this.draw()),D.then(()=>this.draw()),this.draw()),this.onDrawed=F,this.onGameOver=R,this.gameAlives=new Map([...Array(this.players).keys()].map(e=>[this.degNormal(e),!0])),this.freeMode=L,this.record=[],this.turn=0,this.mouseControl=function(e){let a=!1,t=[],s=null,i=null,{canvas:r}=e,o=(a,s,i=()=>{})=>{let o=window.getComputedStyle(r),n=a.target.getBoundingClientRect(),l=r.width/parseFloat(o.width),d=r.height/parseFloat(o.height);if(a.clientX)l*=a.clientX-n.left,d*=a.clientY-n.top;else if(0<a.touches.length){if(1<a.touches.length)return;l*=a.touches[0].clientX-n.left,d*=a.touches[0].clientY-n.top}else a.preventDefault(),[l,d]=t;e.field.forEach((e,a)=>e.forEach((e,t)=>s(e,l,d,t,a))),i(l,d),e.draw(),t=[l,d]},n=t=>{a=!0,o(t,(a,i,r)=>{let{piece:o,pX:n,pY:l}=a;o&&a.checkRangeMouse(i,r)&&(t.preventDefault(),o.isSelected=!0,s=a,function(e,a,t,s){let{field:i,yLen:r,enPassant:o}=e;function n(e,a){return i[a]&&i[a][e]&&!i[a][e].hasAttr("keepOut")}function l(e){return e.piece&&a.hasAttr("po")&&e.piece.hasAttr("po")}function d(n,d,S,p="",m=!0){if(!i[S]||!i[S][d])return!1;let c=i[S][d];return!(!c||l(c)||c.piece&&!a.isMoved&&!c.piece.isMoved&&a.hasAttr("pao")&&a.cost<c.piece.cost||"enPassant"===p&&!o.isTarget(c,a)||a.hasAttr("inPalace")&&!c.hasAttr("palace")||0===p.indexOf("palace")&&!(c.hasAttr(p)&&i[s][t].hasAttr(p))||a.hasAttr("unCrossRiver")&&r-(0|r/2)<=e.getRow(d,S,a.deg))&&(n?!!i[S][d].piece&&(!m||a.deg!==i[S][d].piece.deg):!i[S][d].piece)}function S(e,t,s){let r=i[s][t];r.addTarget(e),o.setTarget(r,a)}!function(){let e=a.getRange();for(let r of(e.attack??=e.default,f)){let o=r[0];if(a.isMoved&&["start","castling"].includes(o))continue;let p=e[o];if(p)for(let e of function(e){let a,t;let s=[];for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++){let o=e[i][r];for(let[e,{isOwn:n}]of W)o===e&&(s.push({isOwn:n,oX:r,oY:i}),n&&([a,t]=[r,i]))}return s.map(e=>(e.offsetX=e.oX-a,e.offsetY=e.oY-t,e))}(p))(function(e,[a,{isAttack:i}],{oX:r,oY:o,isOwn:l}){if(l)for(let[l,{child:p=[]}={}]of A)for(let m=0;m<e.length;m++)for(let c=0;c<e[m].length;c++){let[g,h]=[c+t-r,m+s-o];!n(g,h)||!d(i,g,h,a)||e[m][c]!==l||function(e,a,i,r,o){for(let l of a)for(let a=0;a<e.length;a++)for(let S=0;S<e[a].length;S++){let[p,m]=[S+t-r,a+s-o];if(!(!n(p,m)||d(i,0|p,0|m,"",!1)||e[a][S]!==l))return!0}return!1}(e,p,!1,r,o)||S(a,g,h)}})(p,r,e),function(e,[a,{isAttack:r}],{oX:o,oY:p,isOwn:m,offsetX:c,offsetY:g}){if(!(!m&&!d(!1,t+c,s+g)))for(let[m,{jmps:h=0,moves:u=0}={}]of y){let B=!u||0===u;for(let f=p-1;f<=p+1;f++)for(let W=o-1;W<=o+1;W++){if(e[f][W]!==m||W===o&&f===p)continue;let A=h||0,y=u||0,[C,w]=[W-o,f-p];for(let e=t,o=s;;){e+=C,o+=w;let t=e+c,s=o+g;if(!n(t,s)||!B&&0===y)break;let p=0===A;p&&d(r,t,s,a,p)?(y--,S(a,t,s)):h<1&&y--;let m=i[s][t];if(m.piece&&(A--,p||l(m)))break}}}}(p,r,e)}}()}(e,o,n,l))},(a,s)=>{for(let[r,o]of e.stand.stocks)for(let e=o.length-1;0<=e;e--)if(o[e].checkRangeMouse(a,s)){t.preventDefault(),o[e].isSelected=!0,i={deg:r,i:e};return}})},l=e=>{a&&(s||i)&&o(e,(e,a,t)=>{e.isSelected=e.checkRangeMouse(a,t)})},d=t=>{a=!1,o(t,(a,t,r)=>{a.checkRangeMouse(t,r)&&(s&&e.movePiece(s,a),i&&!a.piece&&e.stand.releasePiece(a,i))}),o(t,e=>{e.piece&&(e.piece.isSelected=!1),e.isSelected=!1,e.clearTarget()},()=>{for(let[a,t]of e.stand.stocks)for(let e=t.length-1;0<=e;e--)t[e].isSelected=!1;s=null,i=null})};return r.addEventListener("mousedown",n),r.addEventListener("mousemove",l),r.addEventListener("mouseup",d),r.addEventListener("touchstart",n),r.addEventListener("touchmove",l),r.addEventListener("touchend",d),{removeEvent(){r.removeEventListener("mousedown",n),r.removeEventListener("mousemove",l),r.removeEventListener("mouseup",d),r.removeEventListener("touchstart",n),r.removeEventListener("touchmove",l),r.removeEventListener("touchend",d)}}}(this),j&&(this.playerControl=this.makePlayerControl(),this.playerControl.add()),this.enPassant=new x}makePlayerControl(e){return this.playerControl=new C(this,e)}close(){this.mouseControl.removeEvent(),this.playerControl?.remove()}degNormal(e){let a=e;0<a&&a<4&&(a=0|360*a/this.players);do a=(a+360)%360;while(a<0);return a}rotate(e=!0){let a=this.degNormal(1);e||(a=-a),this.#e(a),this.stand.rotate(a),this.autoDrawing&&this.draw()}#e(e){let{field:a,xLen:t,yLen:s}=this;if(0===(e=this.degNormal(e)))return;if(![90,180,270].includes(e))throw Error(`deg=${e}, deg need multiple of 90.`);let i=a.map(e=>e.map(({piece:e})=>e));if([90,270].includes(e)){let e;if(t!==s)throw Error(`cols=${t} != rows=${s}, Not rows = cols.`);i=(e=i)[0].map((a,t)=>e.map(e=>e[t]))}[180,270].includes(e)&&i.reverse(),i.forEach(a=>{a.forEach(a=>{a&&(a.deg+=e)}),[90,180].includes(e)&&a.reverse()}),a.forEach((e,a)=>e.forEach((e,t)=>e.piece=i[a][t]))}putStartPieces(e,a,t="default"){let{pieces:i}=this,r=this.degNormal(e);this.#e(r);let o=s[a].position[this.xLen][t];if(!o)throw Error(`games["${a}"].position["${this.xLen}"]["${t}"]is null.`);o.forEach((e,a)=>{if(e.length<this.xLen)throw Error(e.join(""));let t=a+this.yLen-o.length;[...e].forEach((e,a)=>{i[e]&&(this.field[t][a].piece=i[e].clone())})}),this.#e(-r),this.autoDrawing&&this.draw()}putNewPiece(e,a,t,s,i={}){let{displayPtn:r=0,isMoved:o=!1}=i,{pieces:n}=this,l=this.degNormal(s);"string"==typeof e&&(e=new u(this.ctx,n[e],{displayPtn:r,deg:l,isMoved:o})),this.field[t][a].piece=e,this.autoDrawing&&this.draw()}setTextPieces(e){let{field:a,pieces:t,xLen:s,yLen:i}=this,r="持駒：";0<e.indexOf(r)&&(e=w.convTextPieces(e));let o=[e].concat([..."┏━┯┓┗┷┛┃│┠─┼┨―"],Object.values(u.degChars).map(e=>`
`+e+r)).reduce((e,a)=>e.replace(RegExp(a,"g"),"")).replace(/\n\n/g,`
`).replace(/　/g,"・").trim().split(/\n/).map(e=>e.match(/.{2}/g));for(let e=0;e<i;e++)for(let i=0;i<s;i++)try{let s=o[e][i];a[e][i].piece=u.stringToPiece(t,s)}catch{a[e][i].piece=null}this.stand.clear();let n=o[i];n&&n.forEach(e=>{let a=u.stringToPiece(t,e);a&&this.stand.add(a)}),this.autoDrawing&&this.draw()}getRow(e,a,t,s=0){let{xLen:i,yLen:r}=this;return 0===(t=this.degNormal(t+s))?r-1-a:90===t?e:180===t?a:270===t?i-1-e:-1}getCol(e,a,t,s=0){let{xLen:i,yLen:r}=this;return 0===(t=this.degNormal(t+s))?e:90===t?r-1-a:180===t?i-1-e:270===t?a:-1}checkCanPromo(e){let a;let{yLen:t}=this,{piece:s,pX:i,pY:r}=e,{deg:o}=s,[n,l]=[s.game.promoLine,s.forcePromoLine].map(e=>t-e-(0|this.promoLineOffset));return{canPromo:n<=(a=this.sidePromo?Math.max(...Object.keys(u.degChars).map(e=>0|e).filter(e=>e!==o).map(e=>this.getRow(i,r,e,180))):this.getRow(i,r,o)),forcePromo:l<=a}}#a(){[...this.gameAlives].forEach(([e,a],t)=>{a&&(this.field.some(a=>a.some(({piece:a})=>a&&a.deg===e&&a.hasAttr("king")))||(this.gameAlives.set(e,!1),this.onGameOver&&this.onGameOver(this,t)))})}#t(e,a,t,s){let{freeMode:i}=this,{piece:r}=a;if(!r.promo||r.hasAttr("promoted")||!t){this.addRecord({fromPanel:e,toPanel:a});return}do for(let[t,{name:s}]of Object.entries(r.promo))if(confirm(`成りますか?
${r.char}:${r.name}
　↓
${t}:${s}`)){this.addRecord({fromPanel:e,toPanel:a,end:"成"}),r.promotion(t);return}while(!i&&s);this.addRecord({fromPanel:e,toPanel:a,end:"不成"})}movePiece(e,a){let{stand:t,freeMode:s,enPassant:i}=this;if(!e||a.hasAttr("keepOut")||a.piece===e.piece||a.piece?.deg===e.piece.deg||!s&&!a.isTarget)return;let{canPromo:r,forcePromo:o}=this.checkCanPromo(e);t.capturePiece(e.piece,a.piece,a.hasAttr("capture"),a.hasAttr("cantCapture")),a.piece=e.piece,a.piece.isMoved=!0,e.piece=null;let n=this.checkCanPromo(a);r||=n.canPromo,o||=n.forcePromo,i.setMoved(a),this.#t(e,a,r,o),this.#a()}addRecord(e={}){let{record:a}=this,{fromPanel:t={},toPanel:s={},end:i="",inc:r=1}=e,{piece:o={}}=s;this.turn+=r,a[this.turn]={from:{pX:t.pX,pY:t.pY},to:{pX:s.pX,pY:s.pY},deg:o.deg,pieceChar:o.char,end:i,fieldText:this.getTextPieces("compact",!0),fieldMoved:this.field.map(e=>e.map(({piece:e})=>e?.isMoved?1:0))},0<r&&a.splice(this.turn+1)}#s(e){let{record:a}=this;if(!a[this.turn+e])return;this.turn+=e;let{fieldText:t,fieldMoved:s}=a[this.turn];this.setTextPieces(t),this.field.forEach((e,a)=>e.forEach(({piece:e},t)=>{e&&(e.isMoved=!!s[a][t])}))}undoRecord(){this.#s(-1)}redoRecord(){this.#s(1)}getTextRecord(e=!1){let a=({pX:a})=>null==a?"*":(this.xLen-a).toString(e?10:36),t=({pY:a})=>null==a?"*":(a+1).toString(e?10:36);return this.record.slice(1,this.turn+1).map(({to:s,from:i,deg:r,pieceChar:o,end:n},l)=>`${l+1}: ${u.degChars[r]}${a(s)}${e?",":""}${t(s)}${o}${n} (${a(i)}${e?",":""}${t(i)})`).join(`
`)}getJsonRecord(e=!1){let a=JSON.stringify(this.record,null,"");return e?encodeURI(a):a}setJsonRecord(e,a){this.record=JSON.parse(decodeURI(e)),this.turn=a??this.record.length-1,this.#s(0)}draw(){let{ctx:e,canvas:a,left:t,top:s,width:i,height:r,panelWidth:o,panelHeight:n}=this;0===this.turn&&this.addRecord({inc:0}),e.restore(),e.save(),e.clearRect(0,0,a.width,a.height),e.fillStyle=this.canvasBackgroundColor,e.fillRect(0,0,a.width,a.height),e.fillStyle=this.backgroundColor,e.lineWidth=this.borderWidth,e.strokeStyle=this.borderColor,e.save(),e.translate(t,s),e.fillRect(0,0,i,r),e.strokeRect(0,0,i,r),e.translate(o/2,n/2),e.strokeRect(0,0,i-o,r-n),e.restore(),this.stand.draw(),this.field.forEach(e=>{e.forEach(e=>{e.draw()})}),this.onDrawed&&this.onDrawed(this)}getTextPieces(e="default",a=!1){return"bod"===e?w.getTextPieces(this):this.toString("compact"===e,a)}toString(e=!1,a=!1){let{xLen:t}=this,s="",i="",r="",o="",n=`
`;return e||(s=`┏${Array(t).fill("━━").join("┯")}┓
`,i=`
┗${Array(t).fill("━━").join("┷")}┛`,r="┃",o="│",n=`
┠${Array(t).fill("──").join("┼")}┨
`),s+this.field.map(t=>r+t.map(t=>t.piece?.toString(a)??t.toString(e)).join(o)+r).join(n)+i+this.stand.toString(e)}async downloadImage(e,a,t){await h(this.canvas,e??this.name??"shogicross",a,t)}}return e.Board=N,e.Piece=u,e.boards=i,e.canvasFont=a,e.canvasImage=c,e.gameSoft=t,e.games=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});